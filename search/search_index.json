{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"/]+|(?!\\b)(?=[A-Z][a-z])|\\.(?!\\d)|&[lg]t;","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to idmtools","text":"<p>idmtools is a collection of Python tools designed to streamline disease modeling workflows on HPC clusters and various compute platforms.</p>"},{"location":"#idmtools-workflow","title":"Idmtools Workflow","text":"<p>idmtools provides a variety of options for each step of the modeling process. To accommodate different workflows, the tool suite was designed in a modular fashion, allowing users to select only the utilities they need. To simplify workflows, facilitate the modeling process, and make models and their results reusable and shareable, idmtools allows users to create assets. Assets can be added at any level of the process \u2014 from running a specific task, to creating a simulation, to creating an experiment \u2014 giving users the flexibility to create inputs based on their specific needs, whether transient or shared across multiple simulations. The diagram below shows how idmtools and its related packages are used in an end-to-end workflow using EMOD as the disease transmission model.</p> <p></p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Multi-Platform Support: Run simulations on COMPS, Slurm, Docker containers, or locally</li> <li>Model Agnostic: Works with Python, R, and custom models</li> <li>Flexible Workflows: From input creation to calibration, commissioning, and analysis</li> <li>Asset Management: Share configurations and files across simulations</li> <li>Parameter Sweeps: Easily run parameter sweeps and sensitivity analyses</li> </ul>"},{"location":"#quick-links","title":"Quick Links","text":"<ul> <li> <p> Getting Started</p> <p>Install idmtools and run your first simulation in minutes</p> <p> Installation</p> </li> <li> <p> User Guide</p> <p>Learn how to create simulations, run experiments, and analyze results</p> <p> User Guide</p> </li> <li> <p> Tutorials</p> <p>Step-by-step tutorials for common workflows</p> <p> Tutorials</p> </li> <li> <p> API Reference</p> <p>Complete API documentation for all modules</p> <p> API Docs</p> </li> </ul>"},{"location":"#supported-platforms","title":"Supported Platforms","text":"<p>idmtools supports multiple compute platforms:</p> <ul> <li>COMPS - Computational Modeling Platform Service</li> <li>Slurm - HPC cluster workload manager</li> <li>Container - Docker-based local execution</li> </ul>"},{"location":"#architecture","title":"Architecture","text":"<pre><code>graph LR\n    A[User Code] --&gt; B[idmtools Core]\n    B --&gt; C[COMPS Platform]\n    B --&gt; D[Slurm Platform]\n    B --&gt; E[Container Platform]\n    C --&gt; G[HPC Cluster]\n    D --&gt; G\n    E --&gt; H[Docker]</code></pre>"},{"location":"#community","title":"Community","text":"<ul> <li>GitHub: institutefordiseasemodeling/idmtools</li> <li>Issues: Report bugs and request features on GitHub</li> <li>PyPI: idmtools package</li> </ul>"},{"location":"#license","title":"License","text":"<p>Copyright \u00a9 2019-2026 Bill &amp; Melinda Gates Foundation. All rights reserved.</p>"},{"location":"changelog/","title":"Changelog","text":"<p>All notable changes to idmtools will be documented here.</p>"},{"location":"changelog/#300","title":"[3.0.0]","text":""},{"location":"changelog/#feature-requests","title":"Feature Requests","text":"<ul> <li>#2423 - Remove Suite from Suite/Experiment/Simulation structure</li> <li>#2550 - Remove add_dummy_suite by default for file/container/slurm platforms</li> <li>#2545 - Container Platform should not make root as default user</li> <li>#2564 - Enhance get_directory, possibly using caching to cut build time</li> <li>#2565 - Make wait refresh_interval configurable</li> <li>#2572 - Add tags.json file for simulation/experiment/suite folder</li> <li>#2578 - Better to clear up the entity's _platform_directory cache before run entity</li> </ul>"},{"location":"changelog/#bugs","title":"Bugs","text":"<ul> <li>#2553 - User should not need to call platform.create_item themself</li> <li>#2554 - Access exp.parent may throw exception</li> <li>#2555 - Access sim.parent may throw exception</li> <li>#2556 - experiment.add_simulation(sim) didn't set sim.parent for newly added sim</li> <li>#2558 - Simulation has no experiment_id field, just inherits parent_id</li> <li>#2559 - Suite retrieved from cache (or pickle) has experiments is None</li> <li>#2561 - Experiment.simulations.append may add duplicate simulation</li> <li>#2577 - Make behaviors consistent when calling get_directory</li> <li>#2580 - Container platform sims sometimes fail to create</li> </ul>"},{"location":"changelog/#developertest","title":"Developer/Test","text":"<ul> <li>#2567 - Fully idmtools testing for all changes (major Suite structure changes)</li> <li>#2589 - Update docs with new folder structure changes</li> </ul>"},{"location":"changelog/#220","title":"[2.2.0]","text":""},{"location":"changelog/#bugs_1","title":"Bugs","text":"<ul> <li>#2478 - bootstrap.py didn't initialize logging well</li> <li>#2207 - Fix AnalyzeManager: output message</li> <li>#2502 - AnalyzeManager not able to retrieve assets files</li> <li>#2503 - get_files failed with COMPS Simulation</li> </ul>"},{"location":"changelog/#core","title":"Core","text":"<ul> <li>#2469 - Remove sequence id utility</li> <li>#2473 - Update plugin and alias</li> </ul>"},{"location":"changelog/#developertest_1","title":"Developer/Test","text":"<ul> <li>#2472 - Test calibration with new changes</li> <li>#2474 - Update dev scripts</li> <li>#2476 - Update unit tests</li> <li>#2484 - Remove slurm utils GA related scripts</li> <li>#2490 - Test AnalyzeManager and PlatformAnalysis</li> </ul>"},{"location":"changelog/#documentation","title":"Documentation","text":"<ul> <li>#2475 - Update idmtools documents</li> <li>#2535 - Intermittent Sphinx Build Failures Triggered by PUML Rendering</li> </ul>"},{"location":"changelog/#feature-requests_1","title":"Feature Requests","text":"<ul> <li>#2493 - Epic: Add tag-based filtering and other utility enhancements</li> <li>#2494 - Reallocate JobHistory utility and we may use it in other platforms</li> <li>#2498 - Add get_directory methods for Suite/Experiment/Simulations</li> <li>#2499 - Add get_simulations() and get_experiments()</li> <li>#2500 - Add simulation filtering with tags</li> <li>#2504 - get_files is case-sensitive on file names</li> <li>#2510 - Reduce UI tags space used by idmtools task_type tag in Simulation/Experiment</li> </ul>"},{"location":"changelog/#platforms","title":"Platforms","text":"<ul> <li>#2424 - Epic: Refactor SLURMPlatform to reduce the duplicate coding</li> <li>#2465 - Update tests and GHA for SLURM platform change</li> <li>#2466 - Make SlurmPlatform inherit from FilePlatform</li> <li>#2467 - Refactor FilePlatform</li> <li>#2468 - Remove bridged and remote utility</li> <li>#2483 - Remove mode related functions</li> <li>#2488 - Consolidate FileExperiment, SlurmExperiment, etc.</li> <li>#2489 - Refactor flatten_item method</li> </ul>"},{"location":"changelog/#other","title":"Other","text":"<ul> <li>#2477 - Refactor Slurm Platform: prepare new idmtools 2.2.0 release</li> <li>#2491 - Work with EMOD team to test before the release</li> </ul>"},{"location":"changelog/#support","title":"Support","text":"<ul> <li>#2482 - bootstrap.py may encounter \"Access is denied.\" issue</li> </ul>"},{"location":"changelog/#210","title":"[2.1.0]","text":""},{"location":"changelog/#bugs_2","title":"Bugs","text":"<ul> <li>#2420 - Fix Macbook issues to support ContainerPlatform</li> <li>#2413 - CommandLine.add_option adds extra double quotes around strings with spaces, making file paths inaccessible</li> <li>#2422 - Not providing the appropriate message while running container platform on Windows when Developer Mode is off</li> <li>#2432 - idmtools_platform_comps/ssmt_work_items/work_order.py field error cause doc build fail</li> <li>#2426 - Arm simulation builder does not throw an appropriate error message if configured wrong</li> </ul>"},{"location":"changelog/#documentation_1","title":"Documentation","text":"<ul> <li>#2431 - Fix document build issue with idm-buildtools</li> </ul>"},{"location":"changelog/#feature-requests_2","title":"Feature Requests","text":"<ul> <li>#2445 - Fix pip install issue which depends on index-url or extra-index-url</li> <li>#2450 - Create devcontainer for CodeSpaces</li> </ul>"},{"location":"changelog/#platforms_1","title":"Platforms","text":"<ul> <li>#2421 - Run script as a SLURM job</li> <li>#1574 - Can not download AssetCollection files with platform.get_files_by_id</li> </ul>"},{"location":"changelog/#user-experience","title":"User Experience","text":"<ul> <li>#2415 - Write doc to summarize ContainerPlatform support on Macbook</li> </ul>"},{"location":"changelog/#202","title":"[2.0.2]","text":""},{"location":"changelog/#bugs_3","title":"Bugs","text":"<ul> <li>#2391 - Random fail with large number of simulations with NoneType of platform</li> <li>#2393 - Calibra may fail with ContainerPlatform</li> <li>#2395 - Slurm: Do not need to delete suite if job_directory is not exist or suite not exist anymore</li> <li>#2399 - docker container can become unusable in linux</li> </ul>"},{"location":"changelog/#documentation_2","title":"Documentation","text":"<ul> <li>#2386 - jupyter lab version fix</li> </ul>"},{"location":"changelog/#feature-requests_3","title":"Feature Requests","text":"<ul> <li>#2377 - Need to change github actions to only build container docker image when there are related changes</li> <li>#2172 - Adjust the default 'max_running_jobs' in SlurmPlatform</li> <li>#2379 - Container Platform needs to support multiple processes</li> <li>#2396 - Assets duplication</li> </ul>"},{"location":"changelog/#platforms_2","title":"Platforms","text":"<ul> <li>#2388 - Performance issue with get_item in slurm platform when there are lot of items in job directory</li> <li>#2389 - Performance issue with get_item in container platform when there are lot of items in job directory</li> <li>#2247 - Investigation: run each simulation on SLURM with multi cores</li> </ul>"},{"location":"changelog/#releasepackaging","title":"Release/Packaging","text":"<ul> <li>#2400 - Add script for generating changelog by project id and release version</li> </ul>"},{"location":"changelog/#user-experience_1","title":"User Experience","text":"<ul> <li>#2387 - Investigation multiple warnings for binding in NU cluster for singularity</li> <li>#2145 - slurm platform -- unable to run from compute nodes as expected</li> </ul>"},{"location":"changelog/#201","title":"[2.0.1]","text":""},{"location":"changelog/#bugs_4","title":"Bugs","text":"<ul> <li>#2380 - Needs to put Nibbler to linux_mounts.py</li> </ul> <p>For older changelogs, see the GitHub releases page.</p>"},{"location":"skills/","title":"idmtools Skills Guide","text":"<p>Welcome to the idmtools skills guide! This page will help you get started with idmtools \u2014 a Python framework for managing computational experiments across multiple platforms like COMPS and SLURM.</p>"},{"location":"skills/#installation-setup","title":"Installation &amp; Setup","text":""},{"location":"skills/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.10 or higher</li> <li>pip package manager</li> <li>Access to a supported platform (COMPS, SLURM, or Container)</li> </ul>"},{"location":"skills/#install-idmtools","title":"Install idmtools","text":"<p>Install the core package and platform-specific plugins:</p> Bash<pre><code># Full installation (all platforms)\npip install idmtools[full]\n\n# Or install for a specific platform\npip install idmtools[idm]         # COMPS platform\npip install idmtools[container]   # Container platform\npip install idmtools[slurm]       # SLURM platform\n\n# Or install individual packages\npip install idmtools_cli          # CLI tools\npip install idmtools_platform_comps\npip install idmtools_platform_slurm\npip install idmtools_platform_container\npip install idmtools_models\n</code></pre>"},{"location":"skills/#verify-installation","title":"Verify Installation","text":"Bash<pre><code># Using CLI\nidmtools --version\n\n# Or using Python\npython -c \"import idmtools; print(idmtools.__version__)\"\n</code></pre>"},{"location":"skills/#project-structure","title":"Project Structure","text":"<p>A typical idmtools project looks like this:</p> Text Only<pre><code>my_project/\n\u251c\u2500\u2500 model.py              # Your simulation model\n\u251c\u2500\u2500 run_experiment.py     # Experiment configuration &amp; submission\n\u251c\u2500\u2500 analyzer.py           # Post-processing / analysis\n\u251c\u2500\u2500 config.json           # Model parameters\n\u251c\u2500\u2500 idmtools.ini          # Platform configuration (optional)\n\u2514\u2500\u2500 Assets/\n    \u2514\u2500\u2500 python_model.sif  # Singularity image (COMPS/SLURM only)\n</code></pre>"},{"location":"skills/#user-guide","title":"User Guide","text":""},{"location":"skills/#key-concepts","title":"Key Concepts","text":"<p>Task \u2014 Defines what to run. A task wraps your model script, its parameters, and any assets it needs.</p> <p>Simulation \u2014 A single run of a task with a specific set of parameters.</p> <p>Experiment \u2014 A collection of simulations, typically created from a parameter sweep.</p> <p>Platform \u2014 Where your experiment runs (COMPS, SLURM, Container).</p> <p>Assets \u2014 Files your simulations need (scripts, data files, config files, container images).</p> <p>Analyzer \u2014 Post-processing logic that runs after simulations complete.</p>"},{"location":"skills/#basic-workflow","title":"Basic Workflow","text":"<p>The typical idmtools workflow follows these steps:</p> <ol> <li>Write your model \u2014 Create a script that accepts parameters and produces output.</li> <li>Define a task \u2014 Wrap your model in an idmtools Task.</li> <li>Build simulations \u2014 Use a <code>SimulationBuilder</code> to sweep over parameters.</li> <li>Create an experiment \u2014 Group your simulations into an experiment.</li> <li>Run \u2014 Submit the experiment to a platform.</li> <li>Analyze \u2014 Use an Analyzer to aggregate results.</li> </ol>"},{"location":"skills/#minimal-example","title":"Minimal Example","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools_models.python.json_python_task import JSONConfiguredPythonTask\n\n# 1. Connect to a platform\nplatform = Platform(\"COMPS\")\n\n# 2. Define a task\ntask = JSONConfiguredPythonTask(script_path=\"model.py\")\ntask.parameters = {\"beta\": 0.5, \"gamma\": 0.1}\n\n# 3. Sweep parameters\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(\n    JSONConfiguredPythonTask.set_param_partial(\"beta\"),\n    [0.3, 0.5, 0.7, 0.9]\n)\n\n# 4. Create and run experiment\nexperiment = Experiment.from_builder(builder, task, name=\"My First Sweep\")\nexperiment.run(wait_until_done=True)\n</code></pre>"},{"location":"skills/#tutorials","title":"Tutorials","text":""},{"location":"skills/#tutorial-1-simple-parameter-sweep","title":"Tutorial 1: Simple Parameter Sweep","text":"<p>Learn how to sweep a single parameter across multiple values.</p> Python<pre><code>from idmtools.builders import SimulationBuilder\nfrom idmtools_models.python.json_python_task import JSONConfiguredPythonTask\n\ntask = JSONConfiguredPythonTask(script_path=\"model.py\")\ntask.parameters = {\"population\": 10000, \"beta\": 0.5, \"gamma\": 0.1, \"days\": 160}\n\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(\n    JSONConfiguredPythonTask.set_param_partial(\"beta\"),\n    [0.3, 0.5, 0.7, 0.9]\n)\n</code></pre> <p>This creates 4 simulations, each with a different <code>beta</code> value.</p>"},{"location":"skills/#tutorial-2-multi-parameter-sweep","title":"Tutorial 2: Multi-Parameter Sweep","text":"<p>Sweep over multiple parameters simultaneously using cross-product:</p> Python<pre><code>builder = SimulationBuilder()\nbuilder.add_sweep_definition(\n    JSONConfiguredPythonTask.set_param_partial(\"beta\"),\n    [0.3, 0.5, 0.7]\n)\nbuilder.add_sweep_definition(\n    JSONConfiguredPythonTask.set_param_partial(\"gamma\"),\n    [0.05, 0.1, 0.2]\n)\n# Creates 3 x 3 = 9 simulations\n</code></pre>"},{"location":"skills/#tutorial-3-running-with-singularity-containers","title":"Tutorial 3: Running with Singularity Containers","text":"<p>Use a Singularity container to run your model in a controlled environment:</p> Python<pre><code>from idmtools.entities import CommandLine\nfrom idmtools_models.python.singularity_json_python_task import SingularityJSONConfiguredPythonTask\n\ncommand = CommandLine(\n    \"singularity exec ./Assets/my_image.sif python3 Assets/model.py\"\n)\ntask = SingularityJSONConfiguredPythonTask(\n    provided_command=command,\n    script_path=\"model.py\"\n)\n</code></pre>"},{"location":"skills/#tutorial-4-basic-analyzer","title":"Tutorial 4: Basic Analyzer","text":"<p>Create an analyzer to process simulation results:</p> Python<pre><code>from idmtools.entities import IAnalyzer\nimport json\n\nclass MyAnalyzer(IAnalyzer):\n    def __init__(self):\n        super().__init__(filenames=[\"output.json\"])\n\n    def map(self, data, simulation):\n        result = json.loads(data[\"output.json\"])\n        return result[\"summary\"]\n\n    def reduce(self, all_data):\n        for sim, result in all_data.items():\n            print(f\"Simulation {sim.id}: {result}\")\n</code></pre>"},{"location":"skills/#platforms","title":"Platforms","text":"<p>idmtools supports multiple compute platforms. You can configure your platform in an optional <code>idmtools.ini</code> file or directly in code. Without <code>idmtools.ini</code>, SLURM and Container platforms require <code>job_directory</code> to be passed in code.</p>"},{"location":"skills/#comps","title":"COMPS","text":"INI<pre><code># idmtools.ini\n[COMPS]\ntype = COMPS\nendpoint = https://comps.idmod.org\nenvironment = Calculon\n</code></pre> Python<pre><code>platform = Platform(\"COMPS\")\n</code></pre>"},{"location":"skills/#slurm","title":"SLURM","text":"INI<pre><code># idmtools.ini\n[Slurm_Local]\ntype = SLURM_LOCAL\njob_directory = MY_JOB_DIRECTORY\n</code></pre> Python<pre><code># With idmtools.ini\nplatform = Platform(\"Slurm_Local\")\n\n# Without idmtools.ini\nplatform = Platform(\"Slurm_Local\", job_directory=\"MY_JOB_DIRECTORY\")\n</code></pre>"},{"location":"skills/#container-platform","title":"Container Platform","text":"<p>For running experiments locally using Docker containers:</p> INI<pre><code># idmtools.ini\n[My_container]\ntype = Container\njob_directory = MY_JOB_DIRECTORY\n</code></pre> Python<pre><code># With idmtools.ini\nplatform = Platform(\"My_container\")\n\n# Without idmtools.ini\nplatform = Platform(\"Container\", job_directory=\"MY_JOB_DIRECTORY\")\n</code></pre>"},{"location":"skills/#api-reference","title":"API Reference","text":""},{"location":"skills/#core-classes","title":"Core Classes","text":"Class Module Description <code>Platform</code> <code>idmtools.core.platform_factory</code> Creates a connection to a compute platform <code>Experiment</code> <code>idmtools.entities.experiment</code> A collection of simulations <code>Simulation</code> <code>idmtools.entities.simulation</code> A single model run with specific parameters <code>SimulationBuilder</code> <code>idmtools.builders</code> Builds simulations from parameter sweeps <code>CommandLine</code> <code>idmtools.entities</code> Defines the command to execute <code>AssetCollection</code> <code>idmtools.assets</code> A collection of files for simulations <code>Asset</code> <code>idmtools.assets</code> A single file asset <code>IAnalyzer</code> <code>idmtools.entities</code> Base class for analyzers"},{"location":"skills/#task-types","title":"Task Types","text":"Task Class Description <code>PythonTask</code> Run Python scripts directly <code>JSONConfiguredPythonTask</code> Python scripts with JSON config file <code>JSONConfiguredTask</code> Generic scripts with JSON config file <code>TemplatedScriptTask</code> Scripts generated from templates <code>ScriptWrapperTask</code> Wraps an existing script with pre/post commands <code>CommandTask</code> Run arbitrary command-line commands <code>COMPSWorkOrderTask</code> COMPS-specific work order task <code>SingularityJSONConfiguredPythonTask</code> Python scripts in Singularity containers <code>SingularityJSONConfiguredTask</code> Generic scripts in Singularity containers <code>TestTask</code> Task for testing and development"},{"location":"skills/#common-methods","title":"Common Methods","text":"Python<pre><code># Experiment\nexperiment = Experiment.from_builder(builder, task, name=\"My Experiment\")\nexperiment.run(platform=platform, wait_until_done=True)\n\n# SimulationBuilder\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(callback, values)\n\n# Task\ntask.set_parameter(key, value)\ntask.common_assets.add_assets(asset_collection)\ntask.transient_assets.add_asset(\"file.py\")\n\n# Asset\nAsset(filename=\"config.json\", content='{\"key\": \"value\"}')\nAssetCollection.from_id_file(\"path/to/id_file.id\")\n\n# Platform\nplatform = Platform(\"PlatformName\")\n</code></pre>"},{"location":"skills/#cli-reference","title":"CLI Reference","text":"<p>idmtools provides command-line tools for common operations:</p> Bash<pre><code># Check idmtools version\nidmtools --version\n\n# List experiments\nidmtools experiment list --platform COMPS\n\n# Check experiment status\nidmtools experiment status --id &lt;experiment_id&gt; --platform COMPS\n\n# Run an experiment from a script\npython run_experiment.py\n</code></pre>"},{"location":"skills/#singularity-commands-for-container-based-workflows","title":"Singularity Commands (for container-based workflows)","text":"Bash<pre><code># Build a Singularity image\nsingularity build my_image.sif my_image.def\n\n# Test your model locally in the container\nsingularity exec my_image.sif python3 model.py\n\n# Upload the image and save its ID\n# (The .id file is used by AssetCollection.from_id_file())\n</code></pre>"},{"location":"skills/#faq","title":"FAQ","text":"<p>Q: How do I check if my experiment is still running? Use <code>experiment.status</code> after calling <code>experiment.run()</code>, or check the platform's web interface (e.g., COMPS portal).</p> <p>Q: Why is my <code>config.json</code> empty? Make sure you pass a JSON string to <code>Asset(content=...)</code>, not a Python dict. Use <code>json.dumps(config)</code> to convert.</p> <p>Q: How do I add files my model needs? Use <code>task.common_assets</code> for files shared across all simulations, and <code>task.transient_assets</code> for per-simulation files.</p> <p>Q: Can I run experiments locally for testing? Yes, use <code>Platform(\"Container\")</code> to run experiments locally using Docker containers before submitting to COMPS or SLURM.</p> <p>Q: How do I resume a failed experiment? You can retrieve an existing experiment by ID and resubmit:</p> Python<pre><code>from idmtools.core.platform_factory import Platform\n\nplatform = Platform(\"COMPS\")\nexperiment = platform.get_item(item_id=\"&lt;experiment_id&gt;\", item_type=\"experiment\")\n</code></pre> <p>Q: What Python versions are supported? idmtools supports Python 3.10 and above.</p> <p>Q: How do I pass parameters to my model? Use <code>JSONConfiguredPythonTask</code> which automatically writes a <code>config.json</code> file that your model reads. Alternatively, use <code>CommandLine</code> to pass arguments directly.</p>"},{"location":"skills/#changelog","title":"Changelog","text":""},{"location":"skills/#v200-latest","title":"v2.0.0 (Latest)","text":"<ul> <li>Added Singularity container support</li> <li>New <code>SingularityJSONConfiguredPythonTask</code> and <code>SingularityJSONConfiguredTask</code></li> <li>Improved SLURM platform support</li> <li>Updated Python version requirement to 3.8+</li> </ul>"},{"location":"skills/#v170","title":"v1.7.0","text":"<ul> <li>Added <code>SimulationBuilder</code> for parameter sweeps</li> <li>Improved analyzer framework</li> <li>Bug fixes for COMPS platform</li> </ul>"},{"location":"skills/#v160","title":"v1.6.0","text":"<ul> <li>Added local platform support</li> <li>Improved asset management</li> <li>New CLI tools</li> </ul> <p>Next Steps</p> <ul> <li>Explore the Tutorials to build your first experiment</li> <li>Check the API Reference for detailed class documentation</li> <li>Visit the FAQ if you run into issues</li> </ul>"},{"location":"api/","title":"API Reference","text":"<p>Complete API documentation for idmtools.</p>"},{"location":"api/#core-modules","title":"Core Modules","text":""},{"location":"api/#idmtoolscore","title":"idmtools.core","text":"<p>Core classes and functionality</p> <p>Key Classes:</p> <ul> <li><code>Platform</code> - Platform factory and management</li> <li><code>Entity</code> - Base entity class</li> <li><code>ItemType</code> - Entity type enumeration</li> </ul>"},{"location":"api/#idmtoolsmodels","title":"idmtools.models","text":"<p>Model implementations</p> <p>Modules:</p> <ul> <li><code>python</code> - Python model support</li> <li><code>r</code> - R model support</li> <li><code>templated_script_task</code> - Templated models</li> </ul>"},{"location":"api/#idmtoolsplatforms","title":"idmtools.platforms","text":"<p>Platform implementations</p> <p>Platform Types:</p> <ul> <li><code>comps</code> - COMPS platform</li> <li><code>slurm</code> - Slurm platform</li> <li><code>container</code> - Container platform</li> <li><code>process</code> - Local process platforms</li> </ul>"},{"location":"api/#quick-links","title":"Quick Links","text":"<ul> <li>Entities: Simulation, Experiment, Suite</li> <li>Builders: SimulationBuilder</li> <li>Analysis: Analyzers, AnalyzeManager</li> <li>Assets: AssetCollection, Asset</li> </ul>"},{"location":"api/#api-navigation","title":"API Navigation","text":"<p>Browse by module or use the search function to find specific classes and functions.</p>"},{"location":"api/#see-also","title":"See Also","text":"<ul> <li>User Guide - How to use the API</li> <li>Tutorials - API usage examples</li> <li>CLI Reference - Command-line tools</li> </ul>"},{"location":"api/core/","title":"Core API Reference","text":"<p>Core classes and functionality for idmtools.</p>"},{"location":"api/core/#overview","title":"Overview","text":"<p>The <code>idmtools.core</code> package provides the foundational classes and interfaces for building simulations, experiments, and interacting with platforms.</p>"},{"location":"api/core/#quick-reference","title":"Quick Reference","text":""},{"location":"api/core/#core-classes","title":"Core Classes","text":"Class Module Description <code>Platform</code> <code>idmtools.core.platform_factory</code> Creates a connection to a compute platform <code>Experiment</code> <code>idmtools.entities.experiment</code> A collection of simulations <code>Simulation</code> <code>idmtools.entities.simulation</code> A single model run with specific parameters <code>SimulationBuilder</code> <code>idmtools.builders</code> Builds simulations from parameter sweeps <code>CommandLine</code> <code>idmtools.entities</code> Defines the command to execute <code>AssetCollection</code> <code>idmtools.assets</code> A collection of files for simulations <code>Asset</code> <code>idmtools.assets</code> A single file asset <code>ITask</code> <code>idmtools.entities.itask</code> Base class for all tasks <code>IAnalyzer</code> <code>idmtools.entities</code> Base class for analyzers"},{"location":"api/core/#common-methods","title":"Common Methods","text":"Python<pre><code># Experiment\nexperiment = Experiment.from_builder(builder, task, name=\"My Experiment\")\nexperiment.run(platform=platform, wait_until_done=True)\n\n# SimulationBuilder\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(callback, values)\n\n# Task\ntask.set_parameter(key, value)\ntask.common_assets.add_assets(asset_collection)\ntask.transient_assets.add_asset(\"file.py\")\n\n# Asset\nAsset(filename=\"config.json\", content='{\"key\": \"value\"}')\nAssetCollection.from_id_file(\"path/to/id_file.id\")\n\n# Platform\nplatform = Platform(\"PlatformName\")\n</code></pre>"},{"location":"api/core/#platform-factory","title":"Platform Factory","text":""},{"location":"api/core/#platform","title":"Platform","text":"<p>The main entry point for creating platform instances:</p> Python<pre><code>from idmtools.core.platform_factory import Platform\n\n# Create platform\nplatform = Platform(\"COMPS\", endpoint=\"...\", environment=\"...\")\n</code></pre> <p>Key Methods:</p> <ul> <li><code>get_item()</code> - Retrieve entity by ID</li> <li><code>create_items()</code> - Create entities on platform</li> <li><code>get_directory()</code> - Get working directory for entity</li> <li><code>refresh_status()</code> - Update entity status</li> </ul>"},{"location":"api/core/#entities","title":"Entities","text":""},{"location":"api/core/#ientity","title":"IEntity","text":"<p>Base interface for all entities: <code>Experiment</code>, <code>Simulation</code>, <code>Suite</code>, <code>ITask</code>, <code>AssetCollection</code>, <code>IWorkflowItem</code></p> <p>Methods:</p> <ul> <li><code>pre_creation()</code> - Hook called before creation</li> <li><code>post_creation()</code> - Hook called after creation</li> <li><code>to_dict()</code> - Serialize to dictionary</li> <li><code>from_dict()</code> - Deserialize from dictionary</li> </ul>"},{"location":"api/core/#simulation","title":"Simulation","text":"<p>Represents a single simulation:</p> Python<pre><code>from idmtools.entities.simulation import Simulation\nfrom idmtools_models.python.python_task import PythonTask\n\ntask = PythonTask(script_path=\"model.py\")\nsim = Simulation.from_task(task, name=\"My Simulation\")\n</code></pre> <p>Key Methods:</p> <ul> <li>from_task() - Create from task</li> <li>add_asset() - Add input file</li> <li>set_parameter() - Set task parameter</li> </ul>"},{"location":"api/core/#experiment","title":"Experiment","text":"<p>Collection of simulations:</p> Python<pre><code>from idmtools.entities.experiment import Experiment\n\nsims_template = TemplatedSimulations(base_task=task)\nexperiment = Experiment.from_template(sims_template, name=\"My Experiment\")\nexperiment.run(platform=platform, wait_until_done=True)\n</code></pre> <p>Key Methods:</p> <ul> <li>from_task() - Create from Task</li> <li>from_template() - Create from TemplatedSimulations</li> <li>from_builder() - Create from SimulationBuilder</li> <li>run() - Execute on platform</li> <li>refresh_status() - Update status</li> </ul>"},{"location":"api/core/#suite","title":"Suite","text":"<p>Collection of experiments:</p> Python<pre><code>from idmtools.entities.suite import Suite\n\nsuite = Suite(name=\"Complete Study\")\nsuite.add_experiment(exp1)\nsuite.add_experiment(exp2)\nsuite.run(platform=platform)\n</code></pre> <p>Key Methods:</p> <ul> <li><code>add_experiment()</code> - Add experiment to suite</li> <li><code>run()</code> - Execute all experiments</li> </ul>"},{"location":"api/core/#tasks","title":"Tasks","text":""},{"location":"api/core/#itask","title":"ITask","text":"<p>Base interface for tasks:</p> <p>Methods:</p> <ul> <li><code>set_parameter()</code> - Set parameter value</li> <li><code>get_parameter()</code> - Get parameter value</li> <li><code>pre_creation()</code> - Pre-execution hook</li> </ul>"},{"location":"api/core/#commandtask","title":"CommandTask","text":"<p>Execute shell commands:</p> Python<pre><code>from idmtools.entities.command_task import CommandTask\n\ntask = CommandTask(command=\"python model.py --beta 0.5\")\ntask.add_asset(\"model.py\")\n</code></pre> <p>Attributes:</p> <ul> <li><code>command</code> - Command to execute</li> <li><code>parameters</code> - Command parameters</li> </ul>"},{"location":"api/core/#builders","title":"Builders","text":""},{"location":"api/core/#simulationbuilder","title":"SimulationBuilder","text":"<p>Build parameter sweeps:</p> Python<pre><code>from idmtools.builders import SimulationBuilder\n\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(\n    lambda sim, beta: sim.task.set_parameter(\"beta\", beta),\n    [0.1, 0.2, 0.3, 0.4, 0.5]\n)\n</code></pre> <p>Key Methods:</p> <ul> <li><code>add_sweep_definition()</code> - Add parameter sweep</li> <li><code>build()</code> - Generate simulations</li> </ul>"},{"location":"api/core/#assets","title":"Assets","text":""},{"location":"api/core/#assetcollection","title":"AssetCollection","text":"<p>Manage input files:</p> Python<pre><code>from idmtools.assets import AssetCollection\n\nassets = AssetCollection()\nassets.add_asset(\"config.json\")\nassets.add_directory(\"data/\")\n</code></pre> <p>Key Methods:</p> <ul> <li><code>add_asset()</code> - Add single file</li> <li><code>add_directory()</code> - Add directory</li> <li><code>get_asset()</code> - Get asset by name</li> <li><code>remove_asset()</code> - Remove asset</li> </ul>"},{"location":"api/core/#asset","title":"Asset","text":"<p>Represents a single file:</p> Python<pre><code>from idmtools.assets import Asset\n\nasset = Asset(\n    absolute_path=\"/path/to/file.txt\",\n    relative_path=\"inputs/file.txt\"\n)\n</code></pre> <p>Attributes:</p> <ul> <li><code>absolute_path</code> - Source file path</li> <li><code>relative_path</code> - Destination path in simulation</li> <li><code>filename</code> - File name</li> </ul>"},{"location":"api/core/#platform-interface","title":"Platform Interface","text":""},{"location":"api/core/#iplatform","title":"IPlatform","text":"<p>Interface all platforms implement:</p> <p>Key Methods:</p> <ul> <li><code>create_items()</code> - Create entities</li> <li><code>get_item()</code> - Retrieve entity</li> <li><code>refresh_status()</code> - Update status</li> <li><code>get_directory()</code> - Get working directory</li> <li><code>get_files()</code> - List entity files</li> <li><code>retrieve_output_files()</code> - Download outputs</li> </ul>"},{"location":"api/core/#entitystatus","title":"EntityStatus","text":"<p>Entity status values:</p> Python<pre><code>from idmtools.core import EntityStatus\n\nEntityStatus.CREATED\nEntityStatus.RUNNING\nEntityStatus.SUCCEEDED\nEntityStatus.FAILED\nEntityStatus.CANCELLED\n</code></pre>"},{"location":"api/core/#configuration","title":"Configuration","text":""},{"location":"api/core/#idmconfigparser","title":"IdmConfigParser","text":"<p>Configuration file parser:</p> Python<pre><code>from idmtools.core.idmtools_ini import IdmConfigParser\n\nconfig = IdmConfigParser.load()\ncomps_config = config.get_section(\"COMPS\")\n</code></pre> <p>Key Methods:</p> <ul> <li><code>load()</code> - Load configuration</li> <li><code>get_section()</code> - Get config section</li> <li><code>get_option()</code> - Get config option</li> </ul>"},{"location":"api/core/#hooks-and-callbacks","title":"Hooks and Callbacks","text":""},{"location":"api/core/#prepost-creation-hooks","title":"Pre/Post Creation Hooks","text":"Python<pre><code>def on_pre_creation(item, platform):\n    print(f\"Creating {item.name}\")\n\ndef on_post_creation(item, platform):\n    print(f\"Created {item.uid}\")\n\nexperiment.pre_creation_hooks.append(on_pre_creation)\nexperiment.post_creation_hooks.append(on_post_creation)\n</code></pre>"},{"location":"api/core/#see-also","title":"See Also","text":"<ul> <li>Models API - Task implementations</li> <li>Platforms API - Platform implementations</li> <li>User Guide - Usage examples</li> <li>Tutorials - Hands-on examples</li> </ul>"},{"location":"api/core/#full-api-documentation","title":"Full API Documentation","text":"<p>For complete API documentation including all methods, parameters, and examples, see the auto-generated API docs:</p> <ul> <li><code>idmtools.core.platform_factory</code></li> <li><code>idmtools.entities</code></li> <li><code>idmtools.builders</code></li> <li><code>idmtools.assets</code></li> <li><code>idmtools.core.interfaces</code></li> </ul>"},{"location":"api/models/","title":"Models API Reference","text":"<p>Task and model implementations for different programming languages and frameworks.</p>"},{"location":"api/models/#overview","title":"Overview","text":"<p>The <code>idmtools_models</code> package provides task implementations for running models written in various languages (Python, R) and with different frameworks.</p>"},{"location":"api/models/#task-types-quick-reference","title":"Task Types Quick Reference","text":"Task Class Description <code>PythonTask</code> Run Python scripts directly <code>JSONConfiguredPythonTask</code> Python scripts with JSON config file <code>JSONConfiguredTask</code> Generic scripts with JSON config file <code>TemplatedScriptTask</code> Scripts generated from templates <code>CommandTask</code> Run arbitrary command-line commands <code>DockerTask</code> Run tasks inside a Docker container <code>SingularityJSONConfiguredPythonTask</code> Python scripts in Singularity containers <code>SingularityJSONConfiguredTask</code> Generic scripts in Singularity containers"},{"location":"api/models/#python-models","title":"Python Models","text":""},{"location":"api/models/#pythontask","title":"PythonTask","text":"<p>Execute Python scripts with parameters:</p> Python<pre><code>from idmtools_models.python.python_task import PythonTask\n\ntask = PythonTask(\n    script_path=\"model.py\",\n    python_path=\"python\"\n)\n\n# Set parameters\ntask.parameters = {\n    \"population\": 10000,\n    \"beta\": 0.5,\n    \"gamma\": 0.1\n}\n</code></pre> <p>Key Attributes:</p> <ul> <li><code>script_path</code> - Path to script</li> <li><code>python_path</code> - Python executable</li> <li><code>parameters</code> - Dictionary of parameters</li> <li><code>command</code> - Generated command</li> </ul> <p>Key Methods:</p> <ul> <li><code>set_parameter(name, value)</code> - Set parameter</li> <li><code>get_parameter(name)</code> - Get parameter</li> <li><code>add_asset(path)</code> - Add input file</li> </ul> <p>Example: Python<pre><code># Create task\ntask = PythonTask(script_path=\"sir_model.py\")\n\n# Configure\ntask.parameters = {\"beta\": 0.5, \"gamma\": 0.1}\ntask.add_asset(\"config.json\")\ntask.add_asset(\"data.csv\")\n\n# Create simulation\nsim = Simulation.from_task(task)\n</code></pre></p>"},{"location":"api/models/#jsonconfiguredpythontask","title":"JSONConfiguredPythonTask","text":"<p>Python task with JSON configuration:</p> Python<pre><code>from idmtools_models.python.json_python_task import JSONConfiguredPythonTask\n\ntask = JSONConfiguredPythonTask(\n    script_path=\"model.py\",\n    config_filename=\"config.json\"\n)\n\ntask.set_parameter(\"beta\", 0.5)\n# Creates config.json with: {\"beta\": 0.5}\n</code></pre> <p>Features:</p> <ul> <li>Automatic JSON config file generation</li> <li>Parameter validation</li> <li>Nested parameter support</li> </ul> <p>Example:</p> Python<pre><code>task = JSONConfiguredPythonTask(\n    script_path=\"model.py\",\n    config_filename=\"params.json\"\n)\n\ntask.set_parameter(\"model.beta\", 0.5)\ntask.set_parameter(\"output.format\", \"csv\")\n# Generates nested JSON structure\n</code></pre>"},{"location":"api/models/#r-models","title":"R Models","text":""},{"location":"api/models/#rtask-via-commandtask","title":"RTask (via CommandTask)","text":"<p>Execute R scripts:</p> Python<pre><code>from idmtools.entities.command_task import CommandTask\n\ntask = CommandTask(command=\"Rscript model.R\")\ntask.add_asset(\"model.R\")\n</code></pre> <p>With Parameters: Python<pre><code># Pass via command line\ntask = CommandTask(command=f\"Rscript model.R {beta} {gamma}\")\n\n# Or via config file\ntask = CommandTask(command=\"Rscript model.R config.json\")\n</code></pre></p> <p>Example: Python<pre><code>import json\n\n# Create R task\ntask = CommandTask(command=\"Rscript sir_model.R config.json\")\ntask.add_asset(\"sir_model.R\")\n\n# Create config\nconfig = {\"beta\": 0.5, \"gamma\": 0.1, \"population\": 10000}\nwith open(\"config.json\", \"w\") as f:\n    json.dump(config, f)\n\ntask.add_asset(\"config.json\")\n</code></pre></p>"},{"location":"api/models/#templated-scripts","title":"Templated Scripts","text":""},{"location":"api/models/#templatedscripttask","title":"TemplatedScriptTask","text":"<p>Use templates for configuration:</p> Python<pre><code>from idmtools_models.templated_script_task import TemplatedScriptTask\n\n# Python script template\npython_template = \"\"\"\npopulation = {{population}}\nbeta = {{beta}}\ngamma = {{gamma}}\n\ndef run_model():\n    # model code using variables above\n    ...\n\"\"\"\n\ntask = TemplatedScriptTask(\n    script_path=\"model.py\",\n    template_content=python_template\n)\n\ntask.parameters = {\n    \"population\": 10000,\n    \"beta\": 0.5,\n    \"gamma\": 0.1\n}\n# Template variables substituted before execution\n</code></pre> <p>Features:</p> <ul> <li>Jinja2 template syntax</li> <li>Variable substitution</li> <li>Conditional logic</li> <li>Loops and filters</li> </ul> <p>Advanced Example: Python<pre><code>template = \"\"\"\n# Generated configuration\n{% if use_intervention %}\nintervention_day = {{intervention_day}}\nintervention_effectiveness = {{effectiveness}}\n{% endif %}\n\nparameters = {\n    \"beta\": {{beta}},\n    \"gamma\": {{gamma}},\n    {% for key, value in extra_params.items() %}\n    \"{{key}}\": {{value}},\n    {% endfor %}\n}\n\"\"\"\n\ntask = TemplatedScriptTask(\n    script_path=\"model.py\",\n    template_content=template\n)\n\ntask.parameters = {\n    \"use_intervention\": True,\n    \"intervention_day\": 30,\n    \"effectiveness\": 0.5,\n    \"beta\": 0.7,\n    \"gamma\": 0.1,\n    \"extra_params\": {\"duration\": 365, \"timestep\": 1}\n}\n</code></pre></p>"},{"location":"api/models/#template-files","title":"Template Files","text":"<p>Load templates from files:</p> Python<pre><code># config_template.json\n\"\"\"\n{\n    \"population\": {{population}},\n    \"parameters\": {\n        \"beta\": {{beta}},\n        \"gamma\": {{gamma}}\n    },\n    \"output\": {\n        \"format\": \"{{output_format}}\",\n        \"directory\": \"{{output_dir}}\"\n    }\n}\n\"\"\"\n\n# Create task\ntask = TemplatedScriptTask(\n    script_path=\"model.py\",\n    template_path=\"config_template.json\",\n    template_output_filename=\"config.json\"\n)\n\ntask.parameters = {\n    \"population\": 10000,\n    \"beta\": 0.5,\n    \"gamma\": 0.1,\n    \"output_format\": \"csv\",\n    \"output_dir\": \"./results\"\n}\n</code></pre>"},{"location":"api/models/#generic-models","title":"Generic Models","text":""},{"location":"api/models/#generic-command-tasks","title":"Generic Command Tasks","text":"<p>Run any executable:</p> Python<pre><code>from idmtools.entities.command_task import CommandTask\n\n# Julia\ntask = CommandTask(command=\"julia simulation.jl\")\n\n# Compiled executable\ntask = CommandTask(command=\"./model --config config.txt\")\n\n# Shell script\ntask = CommandTask(command=\"bash run_analysis.sh\")\n\n# Python with arguments\ntask = CommandTask(\n    command=\"python model.py --beta 0.5 --gamma 0.1 --output results.json\"\n)\n</code></pre>"},{"location":"api/models/#docker-tasks","title":"Docker Tasks","text":""},{"location":"api/models/#dockertask","title":"DockerTask","text":"<p>Run in Docker container:</p> Python<pre><code>from idmtools_platform_container.docker_task import DockerTask\n\ntask = DockerTask(\n    image=\"python:3.11-slim\",\n    command=\"python model.py\"\n)\n\ntask.add_asset(\"model.py\")\ntask.docker_config = {\n    \"mem_limit\": \"4g\",\n    \"cpus\": 2.0\n}\n</code></pre> <p>Key Attributes:</p> <ul> <li><code>image</code> - Docker image name</li> <li><code>command</code> - Command to run</li> <li><code>docker_config</code> - Docker configuration</li> </ul> <p>Example: Python<pre><code># Use custom image\ntask = DockerTask(\n    image=\"myrepo/simulation:latest\",\n    command=\"python run.py config.json\"\n)\n\n# Configure resources\ntask.docker_config = {\n    \"mem_limit\": \"8g\",\n    \"cpus\": 4.0,\n    \"gpus\": \"all\",\n    \"environment\": {\n        \"NUM_THREADS\": \"4\"\n    }\n}\n</code></pre></p>"},{"location":"api/models/#task-utilities","title":"Task Utilities","text":""},{"location":"api/models/#parameter-management","title":"Parameter Management","text":"Python<pre><code># Set parameter\ntask.set_parameter(\"beta\", 0.5)\n\n# Get parameter\nbeta = task.get_parameter(\"beta\")\n\n# Set multiple\ntask.parameters.update({\n    \"beta\": 0.5,\n    \"gamma\": 0.1,\n    \"population\": 10000\n})\n\n# Check if parameter exists\nif \"beta\" in task.parameters:\n    print(f\"Beta: {task.parameters['beta']}\")\n</code></pre>"},{"location":"api/models/#asset-management","title":"Asset Management","text":"Python<pre><code># Add single file\ntask.add_asset(\"config.json\")\n\n# Add with custom path\ntask.add_asset_file(\"local.txt\", relative_path=\"inputs/remote.txt\")\n\n# Add directory\ntask.add_assets_directory(\"data/\")\n\n# Add multiple\nfor file in [\"file1.csv\", \"file2.csv\", \"file3.csv\"]:\n    task.add_asset(file)\n</code></pre>"},{"location":"api/models/#command-construction","title":"Command Construction","text":"Python<pre><code># CommandTask automatically builds command\ntask = CommandTask(command=\"python model.py\")\n\n# Add arguments\ntask.command.add_argument(\"--beta\")\ntask.command.add_argument(\"0.5\")\n\n# Or use command string\ntask = CommandTask(\n    command=\"python model.py --beta 0.5 --gamma 0.1\"\n)\n\n# Get full command\nprint(task.command)  # \"python model.py --beta 0.5 --gamma 0.1\"\n</code></pre>"},{"location":"api/models/#model-specific-tasks","title":"Model Specific Tasks","text":""},{"location":"api/models/#emod-task-if-installed","title":"EMOD Task (if installed)","text":"Python<pre><code># Requires emodpy\n\ntask = EmodTask.from_default()\ntask.set_parameter(\"Run_Number\", 0)\ntask.set_parameter(\"Simulation_Duration\", 365)\n</code></pre>"},{"location":"api/models/#task-validation","title":"Task Validation","text":""},{"location":"api/models/#pre-execution-validation","title":"Pre-execution Validation","text":"Python<pre><code>def validate_parameters(task):\n    \"\"\"Validate task parameters before execution.\"\"\"\n    beta = task.get_parameter(\"beta\")\n    gamma = task.get_parameter(\"gamma\")\n\n    if beta &lt;= 0 or gamma &lt;= 0:\n        raise ValueError(\"Beta and gamma must be positive\")\n\n    if beta &lt;= gamma:\n        print(\"Warning: R0 &lt; 1, epidemic will not spread\")\n\n# Add validation hook\ntask.pre_creation_hooks.append(validate_parameters)\n</code></pre>"},{"location":"api/models/#asset-validation","title":"Asset Validation","text":"Python<pre><code>def validate_assets(task):\n    \"\"\"Ensure required assets exist.\"\"\"\n    required_files = [\"config.json\", \"model.py\"]\n\n    for filename in required_files:\n        if filename not in task.assets:\n            raise FileNotFoundError(f\"Required asset missing: {filename}\")\n\ntask.pre_creation_hooks.append(validate_assets)\n</code></pre>"},{"location":"api/models/#custom-tasks","title":"Custom Tasks","text":""},{"location":"api/models/#creating-custom-task-types","title":"Creating Custom Task Types","text":"Python<pre><code>from idmtools.entities.itask import ITask\n\nclass CustomTask(ITask):\n    \"\"\"Custom task implementation.\"\"\"\n\n    def __init__(self, custom_param=None):\n        super().__init__()\n        self.custom_param = custom_param\n\n    def pre_creation(self, platform):\n        \"\"\"Setup before execution.\"\"\"\n        # Custom pre-execution logic\n        print(f\"Preparing task with param: {self.custom_param}\")\n\n    def post_creation(self, platform):\n        \"\"\"Cleanup after execution.\"\"\"\n        # Custom post-execution logic\n        pass\n\n    def gather_assets(self):\n        \"\"\"Define task assets.\"\"\"\n        return self.assets\n\n# Use custom task\ntask = CustomTask(custom_param=\"value\")\nsim = Simulation.from_task(task)\n</code></pre>"},{"location":"api/models/#task-inheritance","title":"Task Inheritance","text":"Python<pre><code>class EnhancedPythonTask(PythonTask):\n    \"\"\"Enhanced Python task with additional features.\"\"\"\n\n    def __init__(self, *args, virtual_env=None, **kwargs):\n        super().__init__(*args, **kwargs)\n        self.virtual_env = virtual_env\n\n    def pre_creation(self, platform):\n        \"\"\"Activate virtual environment.\"\"\"\n        if self.virtual_env:\n            self.python_path = f\"{self.virtual_env}/bin/python\"\n        super().pre_creation(platform)\n\n# Use enhanced task\ntask = EnhancedPythonTask(\n    script_path=\"model.py\",\n    virtual_env=\"/path/to/venv\"\n)\n</code></pre>"},{"location":"api/models/#best-practices","title":"Best Practices","text":""},{"location":"api/models/#1-parameter-naming","title":"1. Parameter Naming","text":"Python<pre><code># Good: Clear, descriptive names\ntask.set_parameter(\"transmission_rate\", 0.5)\ntask.set_parameter(\"recovery_rate\", 0.1)\ntask.set_parameter(\"initial_population\", 10000)\n\n# Avoid: Ambiguous names\ntask.set_parameter(\"x\", 0.5)\ntask.set_parameter(\"y\", 0.1)\n</code></pre>"},{"location":"api/models/#2-type-safety","title":"2. Type Safety","text":"Python<pre><code># Validate parameter types\ndef set_typed_parameter(task, name, value, expected_type):\n    if not isinstance(value, expected_type):\n        raise TypeError(f\"{name} must be {expected_type}\")\n    task.set_parameter(name, value)\n\n# Use\nset_typed_parameter(task, \"beta\", 0.5, float)\nset_typed_parameter(task, \"days\", 365, int)\n</code></pre>"},{"location":"api/models/#3-asset-organization","title":"3. Asset Organization","text":"Python<pre><code># Good: Organized asset structure\ntask.add_asset_file(\"input.csv\", relative_path=\"data/input.csv\")\ntask.add_asset_file(\"config.json\", relative_path=\"config/settings.json\")\ntask.add_asset_file(\"model.py\", relative_path=\"scripts/model.py\")\n\n# Avoid: Flat structure with many files\ntask.add_asset(\"file1.csv\")\ntask.add_asset(\"file2.csv\")\n# ... 50 more files ...\n</code></pre>"},{"location":"api/models/#see-also","title":"See Also","text":"<ul> <li>Core API - Core classes and interfaces</li> <li>Platforms API - Platform implementations</li> <li>Python Models Tutorial - Hands-on examples</li> </ul>"},{"location":"api/models/#full-api-documentation","title":"Full API Documentation","text":"<p>For complete API documentation:</p> <ul> <li><code>idmtools_models.python.python_task</code></li> <li><code>idmtools_models.templated_script_task</code></li> <li><code>idmtools.entities.command_task</code></li> <li><code>idmtools_platform_container.docker_task</code></li> </ul>"},{"location":"api/platforms/","title":"Platforms","text":"<p>from examples.native_slurm.slurm_job.example_analyzer import job_directory</p>"},{"location":"api/platforms/#platforms-api-reference","title":"Platforms API Reference","text":"<p>Platform implementations for different compute environments.</p>"},{"location":"api/platforms/#overview","title":"Overview","text":"<p>The platform packages provide implementations for running simulations on various compute platforms including COMPS, Slurm, Docker containers, and local execution.</p>"},{"location":"api/platforms/#platform-factory","title":"Platform Factory","text":""},{"location":"api/platforms/#platform","title":"Platform","text":"<p>Factory for creating platform instances:</p> Python<pre><code>from idmtools.core.platform_factory import Platform\n\n# Create platform by name\nplatform = Platform(\"COMPS\")\n\n# With configuration\nplatform = Platform(\n    \"COMPS\",\n    endpoint=\"https://comps.idmod.org\",\n    environment=\"Bayesian\"\n)\n\n# From config file\nplatform = Platform(\"COMPS\", missing_ok=True)\n</code></pre> <p>Factory Methods:</p> <ul> <li><code>Platform(name, **kwargs)</code> - Create platform instance</li> <li><code>get_platform(name)</code> - Get platform class</li> </ul>"},{"location":"api/platforms/#comps-platform","title":"COMPS Platform","text":""},{"location":"api/platforms/#compsplatform","title":"COMPSPlatform","text":"<p>IDM's on premises based and cloud based platform implementation:</p> Python<pre><code>from idmtools.core.platform_factory import Platform\n\nplatform = Platform(\n    \"COMPS\",\n    endpoint=\"https://comps.idmod.org\",\n    environment=\"Nibbler\",\n    priority=\"Highest\",\n    num_cores=1\n)\n</code></pre> <p>Constructor Parameters:</p> <ul> <li><code>endpoint</code> (str) - COMPS server URL</li> <li><code>environment</code> (str) - Environment name (Calculon(on premises), Nibbler(Azure cloud), SLURMStage, etc.)</li> <li><code>priority</code> (str) - Job priority (Lowest, BelowNormal, Normal, AboveNormal, Highest)</li> <li><code>num_cores</code> (int) - CPU cores per simulation</li> <li><code>node_group</code> (str) - Target node group</li> <li><code>max_workers</code> (int) - Max concurrent operations</li> </ul> <p>Key Methods:</p> <ul> <li><code>platform.get_item(exp_id, item_type=ItemType.EXPERIMENT)</code> - Get experiment by id</li> <li><code>platform.get_item(exp_id, item_type=ItemType.SIMULATION)</code> - Get simulation by id</li> <li><code>platform._experiments.platform_cancel(experiment.id)</code> - Cancel running experiment</li> </ul> <p>Example: Python<pre><code># Create platform\nplatform = Platform(\n    \"COMPS\",\n    endpoint=\"https://comps.idmod.org\",\n    environment=\"Calculon\"\n)\n\n# Run experiment\nexperiment.run(platform=platform, wait_until_done=True)\n\n# Filter simulations by tags\nsimulations = platform.filter_simulations_by_tags(\n    suite_id, item_type=ItemType.SUITE,\n    tags={\"a\": lambda v: 1 &lt;= v &lt;= 2, \"sim_tag\": \"test_tag\"}, entity_type=True)\n\n# Get experiment details\nexp = platform.get_item(exp_id, ItemType.EXPERIMENT)\nprint(f\"Status: {exp.status}\")\nprint(f\"Simulations: {len(exp.simulations)}\")\n</code></pre></p>"},{"location":"api/platforms/#ssmt-work-items","title":"SSMT Work Items","text":"Python<pre><code>from idmtools_platform_comps.ssmt_work_items.comps_workitems import SSMTWorkItem\n\n# Create SSMT work item\nwi_name = \"SSMT WorkItem Example\"\ncommand = \"python3 Assets/Hello_model.py\"\n\nplatform = Platform('SlurmStage')\nwi = SSMTWorkItem(name=wi_name, command=command, assets=AssetCollection.from_directory(\"Assets\"))\nwi.run(True, platform=platform)\n</code></pre>"},{"location":"api/platforms/#slurm-platform","title":"Slurm Platform","text":""},{"location":"api/platforms/#slurmplatform","title":"SlurmPlatform","text":"<p>HPC cluster implementation:</p> Python<pre><code>from idmtools.core.platform_factory import Platform\n\nplatform = Platform(\n    \"SLURM_LOCAL\",\n    job_directory=\"/scratch/jdoe/idmtools\"\n)\n</code></pre> <p>Constructor Parameters:</p> <ul> <li><code>host</code> (str) - Slurm head node hostname</li> <li><code>username</code> (str) - SSH username</li> <li><code>job_directory</code> (str) - Working directory on cluster</li> <li><code>partition</code> (str) - Default partition/queue</li> <li><code>account</code> (str) - Account to charge</li> <li><code>time_limit</code> (str) - Default time limit</li> <li>...</li> </ul> <p>Example: Python<pre><code># Create platform\nplatform = Platform(\"SLURM_LOCAL\", job_directory=\".\",  mail_user=\"test@test.com\",\n                            account=\"test_acct\", mail_type=\"begin\", mem_per_cpu=2048)\n)\n\n# Run\nexperiment.run(platform=platform, wait_until_done=True)\n\n# Check job status\nexperiment.refresh_status(platform)\n</code></pre></p>"},{"location":"api/platforms/#container-platform","title":"Container Platform","text":""},{"location":"api/platforms/#containerplatform-attributes","title":"ContainerPlatform Attributes","text":"Attribute Description <code>job_directory</code> The directory where job data is stored. <code>docker_image</code> The Docker image to run the container. <code>extra_packages</code> Additional packages to install in the container. <code>data_mount</code> The data mount point in the container. <code>user_mounts</code> User-defined mounts for additional volume bindings. <code>container_prefix</code> Prefix for container names. <code>force_start</code> Flag to force start a new container. <code>new_container</code> Flag to start a new container. <code>include_stopped</code> Flag to include stopped containers in operations. <code>debug</code> Flag to enable debug mode. <code>container_id</code> The ID of the container being used. <code>max_job</code> The maximum number of jobs to run in parallel. <code>retries</code> The number of retries to attempt for a job. <code>ntasks</code> Number of MPI processes. If greater than 1, it triggers mpirun. Python<pre><code>from idmtools.core.platform_factory import Platform\n\nplatform = Platform(\n    \"Container\",\n    max_workers=4,\n    job_directory=\"/path/to/workdir\"\n)\n</code></pre>"},{"location":"api/platforms/#platform-configuration","title":"Platform Configuration","text":""},{"location":"api/platforms/#configuration-file","title":"Configuration File","text":"<p>Example <code>~/.idmtools/idmtools.ini</code>:</p> INI<pre><code>[My_Container]\ntype = Container\nmax_workers = 4\njob_dirrectory = /tmp/idmtools\n</code></pre>"},{"location":"api/platforms/#see-also","title":"See Also","text":"<ul> <li>Core API - Core interfaces and classes</li> <li>Models API - Task implementations</li> <li>Platform Guides - Platform-specific documentation</li> <li>Tutorials - Hands-on examples</li> </ul>"},{"location":"api/platforms/#full-api-documentation","title":"Full API Documentation","text":"<p>For complete API documentation:</p> <ul> <li><code>idmtools_platform_comps.comps_platform</code></li> <li><code>idmtools_platform_slurm.slurm_platform</code></li> <li><code>idmtools_platform_container.container_platform</code></li> <li><code>idmtools.core.platform_factory</code></li> </ul>"},{"location":"cli/","title":"CLI Reference","text":"<p>Command-line interface tools for idmtools.</p>"},{"location":"cli/#available-commands","title":"Available Commands","text":""},{"location":"cli/#getting-help","title":"Getting Help","text":"<p>Command: Bash<pre><code>idmtools --help\n</code></pre></p> <p>Output: Text Only<pre><code>Usage: idmtools [OPTIONS] COMMAND [ARGS]...\n\n  Allows you to perform multiple idmtools commands.\n\nOptions:\n  --debug / --no-debug  When selected, enables console level logging\n  --help                Show this message and exit.\n\nCommands:\n  comps        COMPS platform related commands.\n  config       Contains commands related to the creation of idmtools.ini.\n  container    Container platform related commands.\n  examples     Display a list of examples organized by plugin type.\n  file         File platform related commands.\n  gitrepo      Contains commands related to examples download.\n  info         Troubleshooting and debugging information.\n  init         Commands to help start or extend projects through templating.\n  init-export  Export list of project templates.\n  package      Contains commands related to package versions.\n  slurm        Slurm platform related commands.\n  version      List version info about idmtools and plugins.\n\nidmtools &lt;command&gt; --help    # Command-specific help\n</code></pre></p>"},{"location":"cli/#list-platform-plugins-configuration-aliases","title":"List Platform Plugins Configuration Aliases","text":"<p>Command: Bash<pre><code>idmtools info plugins platform-aliases --help\n</code></pre></p> <p>Output: Text Only<pre><code>+---------------------------+-------------------------------------------------------------------------+\n| Platform Plugin Aliases   | Configuration Options                                                   |\n|---------------------------+-------------------------------------------------------------------------|\n| SLURM_LOCAL               | {'job_directory': 'user_job_directory'}                                 |\n| SLURM_CLUSTER             | {'job_directory': 'user_job_directory'}                                 |\n| FILE                      | {'job_directory': 'user_job_directory'}                                 |\n| PROCESS                   | {'job_directory': 'user_job_directory'}                                 |\n| CALCULON_SSMT             | {'endpoint': 'https://comps.idmod.org', 'environment': 'Calculon'}      |\n| IDMCLOUD_SSMT             | {'endpoint': 'https://comps.idmod.org', 'environment': 'IDMcloud'}      |\n| NDCLOUD_SSMT              | {'endpoint': 'https://comps.idmod.org', 'environment': 'NDcloud'}       |\n| BMGF_IPMCLOUD_SSMT        | {'endpoint': 'https://comps.idmod.org', 'environment': 'BMGF_IPMcloud'} |\n| QSTART_SSMT               | {'endpoint': 'https://comps.idmod.org', 'environment': 'Qstart'}        |\n| NIBBLER_SSMT              | {'endpoint': 'https://comps.idmod.org', 'environment': 'Nibbler'}       |\n| SLURMSTAGE_SSMT           | {'endpoint': 'https://comps2.idmod.org', 'environment': 'SlurmStage'}   |\n| CUMULUS_SSMT              | {'endpoint': 'https://comps2.idmod.org', 'environment': 'Cumulus'}      |\n| SLURM_SSMT                | {'endpoint': 'https://comps.idmod.org', 'environment': 'Calculon'}      |\n| SLURM2_SSMT               | {'endpoint': 'https://comps2.idmod.org', 'environment': 'SlurmStage'}   |\n| BOXY_SSMT                 | {'endpoint': 'https://comps2.idmod.org', 'environment': 'SlurmStage'}   |\n| CONTAINER                 | {'job_directory': 'user_job_directory'}                                 |\n| CALCULON                  | {'endpoint': 'https://comps.idmod.org', 'environment': 'Calculon'}      |\n| IDMCLOUD                  | {'endpoint': 'https://comps.idmod.org', 'environment': 'IDMcloud'}      |\n| NDCLOUD                   | {'endpoint': 'https://comps.idmod.org', 'environment': 'NDcloud'}       |\n| BMGF_IPMCLOUD             | {'endpoint': 'https://comps.idmod.org', 'environment': 'BMGF_IPMcloud'} |\n| QSTART                    | {'endpoint': 'https://comps.idmod.org', 'environment': 'Qstart'}        |\n| NIBBLER                   | {'endpoint': 'https://comps.idmod.org', 'environment': 'Nibbler'}       |\n| SLURMSTAGE                | {'endpoint': 'https://comps2.idmod.org', 'environment': 'SlurmStage'}   |\n| CUMULUS                   | {'endpoint': 'https://comps2.idmod.org', 'environment': 'Cumulus'}      |\n| SLURM                     | {'endpoint': 'https://comps.idmod.org', 'environment': 'Calculon'}      |\n| SLURM2                    | {'endpoint': 'https://comps2.idmod.org', 'environment': 'SlurmStage'}   |\n| BOXY                      | {'endpoint': 'https://comps2.idmod.org', 'environment': 'SlurmStage'}   |\n+---------------------------+-------------------------------------------------------------------------+\n</code></pre></p>"},{"location":"cli/#comps-platform-cli-commands","title":"COMPS Platform CLI Commands","text":"<p>Command: Bash<pre><code>idmtools comps --help\n</code></pre></p> <p>Output: Text Only<pre><code>Usage: idmtools comps [OPTIONS] CONFIG_BLOCK COMMAND [ARGS]...\n\n  Commands related to managing the COMPS platform.\n\n  CONFIG_BLOCK - Name of configuration section or alias to load COMPS\n  connection information from\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  ac-exist          Check ac existing based on requirement file Args:...\n  assetize-outputs  Allows assetizing outputs from the command line\n  download          Allows Downloading outputs from the command line\n  login             Login to COMPS\n  req2ac            Create ac from requirement file Args: asset_tag: tag...\n  singularity       Singularity commands\n</code></pre></p>"},{"location":"cli/#container-platform-cli-commands","title":"Container Platform CLI commands","text":"<p>Command: Bash<pre><code>idmtools container --help\n</code></pre></p> <p>Output: Text Only<pre><code>Usage: idmtools container [OPTIONS] COMMAND [ARGS]...\n\n  Container Platform CLI commands.\n\n  Args:     all: Bool, show all commands\n\n  Returns:     None\n\nOptions:\n  --all   Show all commands\n  --help  Show this message and exit.\n\nCommands:\n  cancel   Cancel an Experiment/Simulation job.\n  history  View the job history.\n  jobs     List running Experiment/Simulation jobs.\n  status   Check the status of an Experiment/Simulation.\n</code></pre></p>"},{"location":"cli/#slurm-platform-cli-commands","title":"Slurm Platform CLI commands","text":"<p>Command: Bash<pre><code>idmtools slurm --help\n</code></pre></p> <p>Output: Text Only<pre><code>Usage: idmtools slurm [OPTIONS] JOB_DIRECTORY COMMAND [ARGS]...\n\n  Commands related to managing the SLURM platform.\n\n  job_directory: Slurm Working Directory\n\nOptions:\n  --help  Show this message and exit.\n\nCommands:\n  get-job        Get Suite/Experiment/Simulation slurm job\n  get-latest     Get the latest experiment info\n  get-path       Get Suite/Experiment/Simulation directory\n  get-status     Get status of Experiment/Simulation\n  status         Get simulation's status\n  status-report  Get simulation's report\n</code></pre></p>"},{"location":"cli/#platform-specific-clis","title":"Platform-Specific CLIs","text":"<p>Some platforms have additional CLI tools:</p> <ul> <li>COMPS: Additional COMPS-specific commands</li> <li>Slurm: Job management commands</li> <li>Container: Container management</li> </ul>"},{"location":"cli/#see-also","title":"See Also","text":"<ul> <li>User Guide - Using the CLI in workflows</li> </ul>"},{"location":"faq/","title":"Frequently Asked Questions","text":"<p>Common questions about idmtools.</p>"},{"location":"faq/#installation","title":"Installation","text":""},{"location":"faq/#q-which-python-versions-are-supported","title":"Q: Which Python versions are supported?","text":"<p>A: Python 3.10+ (64-bit only).</p>"},{"location":"faq/#q-do-i-need-to-install-all-platforms","title":"Q: Do I need to install all platforms?","text":"<p>A: No! Use <code>pip install idmtools[platform]</code> to install only what you need. See Installation Guide.</p>"},{"location":"faq/#q-do-i-need-login-to-docker-hub-or-github-container-registry","title":"Q: Do I need login to Docker Hub or Github Container Registry?","text":"<p>A: No, all docker images are public unless you want to push your docker image to Github Container Registry which is  idmtools default docker registry.</p>"},{"location":"faq/#usage","title":"Usage","text":""},{"location":"faq/#q-how-do-i-choose-between-platforms","title":"Q: How do I choose between platforms?","text":"<p>A: See Platform Comparison for guidance.</p>"},{"location":"faq/#q-can-i-run-simulations-locally-without-a-cluster","title":"Q: Can I run simulations locally without a cluster?","text":"<p>A: Yes! Use the Container platform. See Platform Overview.</p>"},{"location":"faq/#q-how-do-i-debug-failed-simulations","title":"Q: How do I debug failed simulations?","text":"<p>A: Check simulation logs, stderr.txt file, use local platform for testing, and enable verbose logging.</p>"},{"location":"faq/#performance","title":"Performance","text":""},{"location":"faq/#q-how-many-simulations-can-i-run-at-once","title":"Q: How many simulations can I run at once?","text":"<p>A: Depends on platform: - COMPS: Thousands or more - Slurm: Cluster-dependent - Container: Limited by local resources</p>"},{"location":"faq/#q-how-do-i-speed-up-parameter-sweeps","title":"Q: How do I speed up parameter sweeps?","text":"<p>A: Use batch execution, optimize simulation code, and choose the right platform. See Parameter Sweeps.</p>"},{"location":"faq/#errors","title":"Errors","text":""},{"location":"faq/#q-module-not-found-error","title":"Q: \"Module not found\" error","text":"<p>A: Ensure idmtools is installed: <code>pip install idmtools[full]</code>. Or pip install complained model</p>"},{"location":"faq/#q-platform-connection-failed","title":"Q: Platform connection failed","text":"<p>A: Check your configuration and network connectivity. See Configuration.</p>"},{"location":"faq/#q-out-of-memory-errors","title":"Q: Out of memory errors","text":"<p>A: Reduce batch size, use fewer workers, or increase system resources.</p>"},{"location":"faq/#common-workflow-questions","title":"Common Workflow Questions","text":""},{"location":"faq/#q-how-do-i-check-if-my-experiment-is-still-running","title":"Q: How do I check if my experiment is still running?","text":"<p>Use <code>experiment.status</code> after calling <code>experiment.run()</code>, or check the platform's web interface (e.g., COMPS portal). Or use idmtools cli command for Container and Slurm platforms</p>"},{"location":"faq/#q-why-is-my-configjson-empty","title":"Q: Why is my <code>config.json</code> empty?","text":"<p>Make sure you pass a JSON string to <code>Asset(content=..., filename=config.json)</code>, not a Python dict. Use <code>json.dumps(config)</code> to convert.</p>"},{"location":"faq/#q-how-do-i-add-files-my-model-needs","title":"Q: How do I add files my model needs?","text":"<p>Use <code>task.common_assets</code> for files shared across all simulations, and <code>task.transient_assets</code> for per-simulation files.</p>"},{"location":"faq/#q-can-i-run-experiments-locally-for-testing","title":"Q: Can I run experiments locally for testing?","text":"<p>Yes, use <code>Platform(\"Container\")</code> to run experiments locally using Docker containers.</p>"},{"location":"faq/#q-how-do-i-resume-a-failed-experiment","title":"Q: How do I resume a failed experiment?","text":"<p>You can retrieve an existing experiment by ID and resubmit:</p> Python<pre><code>from idmtools.core.platform_factory import Platform\n\nplatform = Platform(\"COMPS\")\nexperiment = platform.get_item(item_id=\"&lt;experiment_id&gt;\", item_type=\"experiment\")\nexperiment.run(wait_until_done=True, platform)\n</code></pre>"},{"location":"faq/#q-how-do-i-pass-parameters-to-my-model","title":"Q: How do I pass parameters to my model?","text":"<p>Use <code>JSONConfiguredPythonTask</code> which automatically writes a <code>config.json</code> file that your model reads. Alternatively,  use <code>CommandLine</code> to pass arguments directly. See Parameter Sweeps.</p>"},{"location":"faq/#getting-help","title":"Getting Help","text":"<p>Can't find your answer?</p> <ul> <li>Check the User Guide</li> <li>Browse Tutorials</li> <li>Search the API Reference</li> <li>Open an issue on GitHub</li> </ul>"},{"location":"getting-started/","title":"Getting Started","text":"<p>Welcome to idmtools! This section will help you get up and running quickly.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python: 3.10, 3.11, 3.12, 3.13, or 3.14 (64-bit)</li> <li>Operating System:</li> <li>Windows 10 Pro or Enterprise</li> <li>Windows 11 Pro or Enterprise</li> <li>Linux</li> <li>macOS (10.15 Catalina or later)</li> <li>Docker (optional): Required for Container platform</li> </ul>"},{"location":"getting-started/#installation","title":"Installation","text":"<p>Choose an installation method based on your needs:</p>"},{"location":"getting-started/#full-installation","title":"Full Installation","text":"<p>Install all idmtools packages:</p> Bash<pre><code>pip install idmtools[full]\n</code></pre> <p>This installs: core, CLI, models, and all platform plugins.</p>"},{"location":"getting-started/#platform-specific-installation","title":"Platform-Specific Installation","text":"<p>Install only what you need:</p> COMPS PlatformSlurm PlatformContainer Platform Bash<pre><code>pip install idmtools[idm]\n</code></pre> <p>Includes: core, CLI, models, COMPS platform</p> Bash<pre><code>pip install idmtools[slurm]\n</code></pre> <p>Includes: core, CLI, models, Slurm platform</p> Bash<pre><code>pip install idmtools[container]\n</code></pre> <p>Includes: core, CLI, models, General platform, Container platform</p>"},{"location":"getting-started/#quick-start","title":"Quick Start","text":"<p>Create your first simulation in 3 steps:</p>"},{"location":"getting-started/#1-import-idmtools","title":"1. Import idmtools","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.entities.simulation import Simulation\nfrom idmtools_models.python.json_python_task import JSONConfiguredPythonTask\n</code></pre>"},{"location":"getting-started/#2-create-a-task","title":"2. Create a Task","text":"Python<pre><code>task = JSONConfiguredPythonTask(\n    script_path=\"my_model.py\",\n    parameters={\"param1\": 10, \"param2\": 20}\n)\n</code></pre>"},{"location":"getting-started/#3-run-experiment","title":"3. Run Experiment","text":"Python<pre><code># Create experiment\nexperiment = Experiment.from_task(\n    task,\n    name=\"My First Experiment\"\n)\n\n# Get platform and run\nwith Platform(\"Local\") as platform:\n    experiment.run(wait_until_done=True)\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Installation Guide - Detailed installation instructions</li> <li>Configuration - Configure your environment</li> <li>Quick Start Tutorial - Complete walkthrough</li> </ul>"},{"location":"getting-started/#need-help","title":"Need Help?","text":"<ul> <li>Check the FAQ</li> <li>Browse Tutorials</li> <li>See Examples</li> </ul>"},{"location":"getting-started/configuration/","title":"Configuration","text":"<p>Learn how to configure idmtools for your environment.</p>"},{"location":"getting-started/configuration/#configuration-file","title":"Configuration File","text":"<p><code>idmtools.ini</code> is an optional configuration file for defining platforms. When present, idmtools automatically searches for it starting from the current working directory and walking up through parent directories until it finds one or reaches the filesystem root.</p> <p>You do not need this file \u2014 platforms can always be configured directly in code by passing parameters to <code>Platform()</code>.</p>"},{"location":"getting-started/configuration/#platform-configuration","title":"Platform Configuration","text":""},{"location":"getting-started/configuration/#comps","title":"COMPS","text":"INI<pre><code># idmtools.ini\n[COMPS]\ntype = COMPS\nendpoint = https://comps.idmod.org\nenvironment = Calculon\n</code></pre> Python<pre><code>platform = Platform(\"COMPS\")\n</code></pre>"},{"location":"getting-started/configuration/#slurm","title":"Slurm","text":"INI<pre><code># idmtools.ini\n[Slurm_Local]\ntype = SLURM_LOCAL\njob_directory = MY_JOB_DIRECTORY\n</code></pre> Python<pre><code># With idmtools.ini\nplatform = Platform(\"Slurm_Local\")\n\n# Without idmtools.ini\nplatform = Platform(\"Slurm_Local\", job_directory=\"MY_JOB_DIRECTORY\")\n</code></pre>"},{"location":"getting-started/configuration/#container","title":"Container","text":"INI<pre><code># idmtools.ini\n[My_container]\ntype = Container\njob_directory = MY_JOB_DIRECTORY\n</code></pre> Python<pre><code># With idmtools.ini\nplatform = Platform(\"My_container\")\n\n# Without idmtools.ini\nplatform = Platform(\"Container\", job_directory=\"MY_JOB_DIRECTORY\")\n</code></pre>"},{"location":"getting-started/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Quick Start - Run your first simulation</li> <li>User Guide - Learn more about idmtools</li> <li>Platform Guides - Platform-specific configuration</li> </ul>"},{"location":"getting-started/installation/","title":"Installation","text":""},{"location":"getting-started/installation/#prerequisites","title":"Prerequisites","text":"<p>Before installing idmtools, ensure you have:</p> <ul> <li>Python 3.10+ (64-bit) - Check with <code>python --version</code></li> <li>pip - Python package installer</li> <li>Virtual environment (recommended)</li> </ul>"},{"location":"getting-started/installation/#create-virtual-environment","title":"Create Virtual Environment","text":"<p>It's recommended to use a virtual environment:</p> WindowsLinux/macOS Bash<pre><code>python -m venv idmtools\nidmtools\\Scripts\\activate\n</code></pre> Bash<pre><code>python -m venv idmtools\nsource idmtools/bin/activate\n</code></pre>"},{"location":"getting-started/installation/#installation-options","title":"Installation Options","text":""},{"location":"getting-started/installation/#full-installation","title":"Full Installation","text":"<p>Install everything:</p> Bash<pre><code>pip install idmtools[full]\n</code></pre> <p>Includes: - idmtools-core - idmtools-cli - idmtools-models - idmtools-platform-comps - idmtools-platform-container - idmtools-platform-general - idmtools-platform-slurm</p>"},{"location":"getting-started/installation/#platform-specific","title":"Platform-Specific","text":"<p>Choose based on your compute platform:</p>"},{"location":"getting-started/installation/#comps-platform","title":"COMPS Platform","text":"Bash<pre><code>pip install idmtools[idm]\n</code></pre>"},{"location":"getting-started/installation/#slurm-platform","title":"Slurm Platform","text":"Bash<pre><code>pip install idmtools[slurm]\n</code></pre>"},{"location":"getting-started/installation/#container-docker-platform","title":"Container (Docker) Platform","text":"Bash<pre><code>pip install idmtools[container]\n</code></pre> <p>Requires Docker or Docker Desktop.</p>"},{"location":"getting-started/installation/#individual-packages","title":"Individual Packages","text":"<p>Install only what you need:</p> Bash<pre><code>pip install idmtools              # Core only\npip install idmtools-cli          # CLI tools\npip install idmtools-models       # Python/R models\npip install idmtools-platform-comps\npip install idmtools-platform-slurm\npip install idmtools-platform-container\n</code></pre>"},{"location":"getting-started/installation/#verify-installation","title":"Verify Installation","text":"Bash<pre><code># Using CLI\nidmtools --version\n\n# Or using Python\npython -c \"import idmtools; print(idmtools.__version__)\"\n</code></pre>"},{"location":"getting-started/installation/#project-structure","title":"Project Structure","text":"<p>A typical idmtools project looks like this:</p> Text Only<pre><code>my_project/\n\u251c\u2500\u2500 model.py              # Your simulation model\n\u251c\u2500\u2500 run_experiment.py     # Experiment configuration &amp; submission\n\u251c\u2500\u2500 analyzer.py           # Post-processing / analysis\n\u251c\u2500\u2500 config.json           # Model parameters\n\u251c\u2500\u2500 idmtools.ini          # Platform configuration (optional)\n\u2514\u2500\u2500 Assets/\n    \u2514\u2500\u2500 python_model.sif  # Singularity image (COMPS/Slurm only)\n</code></pre>"},{"location":"getting-started/installation/#development-installation","title":"Development Installation","text":"<p>For contributing to idmtools:</p> Bash<pre><code>git clone https://github.com/institutefordiseasemodeling/idmtools.git\ncd idmtools\npython dev_scripts/bootstrap.py\n</code></pre> <p>This installs all packages in editable mode.</p>"},{"location":"getting-started/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"getting-started/installation/#macos-users","title":"macOS Users","text":"<p>On macOS with square brackets in shell, escape them:</p> Bash<pre><code>pip install idmtools\\[full\\]\n</code></pre>"},{"location":"getting-started/installation/#docker-authentication","title":"Docker Authentication","text":"<p>For Container platform, login to GitHub Container Registry:</p> Bash<pre><code>echo YOUR_GITHUB_PAT | docker login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin\n</code></pre>"},{"location":"getting-started/installation/#permission-errors","title":"Permission Errors","text":"<p>Use <code>--user</code> flag if you don't have admin rights:</p> Bash<pre><code>pip install --user idmtools[full]\n</code></pre>"},{"location":"getting-started/installation/#next-steps","title":"Next Steps","text":"<ul> <li>Configuration - Configure your environment</li> <li>Quick Start - Run your first simulation</li> <li>User Guide - Learn the basics</li> </ul>"},{"location":"getting-started/quickstart/","title":"Quick Start","text":"<p>Run your first idmtools simulation using a SIR (Susceptible-Infected-Recovered) epidemiological model.</p>"},{"location":"getting-started/quickstart/#prerequisites","title":"Prerequisites","text":"<p>Install idmtools with Container platform support:</p> Bash<pre><code>pip install idmtools[container]\n</code></pre>"},{"location":"getting-started/quickstart/#step-1-create-the-model-sir_modelpy","title":"Step 1: Create the Model \u2014 <code>sir_model.py</code>","text":"<p>This script runs a discrete-time SIR model and writes results to <code>output.json</code> and a plot to <code>sir_curve.png</code>.</p> Python<pre><code># sir_model.py\nimport argparse\nimport os\nimport json\nimport matplotlib.pyplot as plt\n\ndef sir_model(N, beta, gamma, days, initial_infected=1):\n    S = N - initial_infected\n    I = initial_infected\n    R = 0\n\n    S_history = [S]\n    I_history = [I]\n    R_history = [R]\n\n    for day in range(days):\n        new_infections = beta * S * I / N\n        new_recoveries = gamma * I\n\n        S -= new_infections\n        I += new_infections - new_recoveries\n        R += new_recoveries\n\n        S_history.append(S)\n        I_history.append(I)\n        R_history.append(R)\n\n    results = {\n        \"S\": S_history,\n        \"I\": I_history,\n        \"R\": R_history,\n        \"final_infected_total\": R,\n        \"peak_infected\": max(I_history),\n        \"peak_day\": I_history.index(max(I_history))\n    }\n\n    with open(\"output.json\", \"w\") as f:\n        json.dump(results, f, indent=2)\n\n    plt.figure(figsize=(10, 6))\n    plt.plot(S_history, label=\"Susceptible\", color=\"blue\")\n    plt.plot(I_history, label=\"Infected\", color=\"red\")\n    plt.plot(R_history, label=\"Recovered\", color=\"green\")\n    plt.xlabel(\"Days\")\n    plt.ylabel(\"Number of Individuals\")\n    plt.title(f\"SIR Model: \u03b2={beta:.3f}, \u03b3={gamma:.3f}\")\n    plt.legend()\n    plt.grid(True)\n    plt.savefig(\"sir_curve.png\", dpi=150)\n    plt.close()\n\n    print(f\"Simulation complete: Peak infected = {max(I_history):.0f} on day {I_history.index(max(I_history))}\")\n    return results\n\nif __name__ == \"__main__\":\n    parser = argparse.ArgumentParser(description=\"Run model with config file\")\n    parser.add_argument(\"--config\", type=str, default=\"config.json\")\n    args = parser.parse_args()\n\n    if os.path.exists(args.config):\n        with open(args.config) as f:\n            config = json.load(f)\n    else:\n        config = {\"N\": 10000, \"beta\": 0.5, \"gamma\": 0.1, \"days\": 160}\n\n    sir_model(**config)\n</code></pre>"},{"location":"getting-started/quickstart/#step-2-create-the-experiment-script-run_python_sirpy","title":"Step 2: Create the Experiment Script \u2014 <code>run_python_sir.py</code>","text":"Python<pre><code># run_python_sir.py\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools_models.python.python_task import PythonTask\n\n# Use Container platform for local execution\nplatform = Platform(\"Container\", job_directory=\"DEST\")\n\ntask = PythonTask(\n    script_path=\"sir_model.py\",\n    python_path=\"python\"\n)\n\n# Set model parameters\ntask.parameters = {\n    \"N\": 10000,\n    \"beta\": 0.5,\n    \"gamma\": 0.1,\n    \"days\": 160\n}\n\n# Create and run experiment\nexperiment = Experiment.from_task(\n    task,\n    name=\"SIR Python Model - Single Run\"\n)\n\nexperiment.run(\n    platform=platform,\n    wait_until_done=True\n)\n\nprint(f\"Experiment ID: {experiment.id}\")\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"getting-started/quickstart/#step-3-run-it","title":"Step 3: Run It","text":"Bash<pre><code>python run_python_sir.py\n</code></pre> <p>You should see output like:</p> Text Only<pre><code>Simulation complete: Peak infected = 2381 on day 37\nExperiment ID: ...\nStatus: EntityStatus.SUCCEEDED\n</code></pre> <p>Simulation outputs are written to the <code>DEST/</code> job directory.</p>"},{"location":"getting-started/quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Parameter Sweeps \u2014 run multiple simulations with different <code>beta</code>/<code>gamma</code> values</li> <li>Analyzing Results \u2014 aggregate results across simulations</li> <li>Platforms \u2014 run on COMPS or Slurm instead</li> <li>Tutorials \u2014 more detailed walkthroughs</li> </ul>"},{"location":"platforms/","title":"Platforms","text":"<p>idmtools supports multiple compute platforms for running simulations.</p>"},{"location":"platforms/#available-platforms","title":"Available Platforms","text":""},{"location":"platforms/#production-platforms","title":"Production Platforms","text":"<ul> <li> <p>COMPS - Computational Modeling Platform Service   IDM's cloud-based HPC platform</p> </li> <li> <p>Slurm - HPC Cluster Platform   Run on Slurm-managed clusters</p> </li> <li> <p>Container - Docker Platform   Local execution in Docker containers</p> </li> </ul>"},{"location":"platforms/#choosing-a-platform","title":"Choosing a Platform","text":"Platform Best For Scale COMPS IDM users, cloud compute Large (1000s of sims) Slurm HPC cluster access Large (1000s of sims) Container Local testing, reproducibility Medium (10s-100s of sims)"},{"location":"platforms/#platform-comparison","title":"Platform Comparison","text":""},{"location":"platforms/#comps","title":"COMPS","text":"<ul> <li>\u2705 Cloud-based, no local resources needed</li> <li>\u2705 Massive scalability</li> <li>\u2705 IDM support</li> <li>\u274c Requires IDM access</li> </ul>"},{"location":"platforms/#slurm","title":"Slurm","text":"<ul> <li>\u2705 Use existing HPC infrastructure</li> <li>\u2705 High performance</li> <li>\u2705 Resource management</li> <li>\u274c Requires cluster access</li> </ul>"},{"location":"platforms/#container","title":"Container","text":"<ul> <li>\u2705 Reproducible environments</li> <li>\u2705 Local execution</li> <li>\u2705 No cluster needed</li> <li>\u274c Limited by local resources</li> </ul>"},{"location":"platforms/#getting-started","title":"Getting Started","text":"<ol> <li>Configure your platform</li> <li>Follow platform-specific guides</li> <li>See tutorials for examples</li> </ol>"},{"location":"platforms/comps/","title":"COMPS Platform","text":"<p>Comprehensive guide to using the Computational Modeling Platform Service (COMPS) with idmtools.</p> <p></p>"},{"location":"platforms/comps/#overview","title":"Overview","text":"<p>COMPS is IDM's cloud-based high-performance computing platform designed for large-scale computational modeling. It provides scalable compute resources, data management, and job scheduling specifically optimized for disease modeling workflows.</p>"},{"location":"platforms/comps/#key-features","title":"Key Features","text":"<ul> <li>Cloud-Based: No local compute resources needed</li> <li>Massive Scale: Run thousands of simulations simultaneously</li> <li>Data Management: Integrated storage and retrieval</li> <li>Collaboration: Share experiments and results with team members</li> <li>Priority Queues: Production and development environments</li> <li>Azure Integration: Leverages Microsoft Azure infrastructure</li> </ul>"},{"location":"platforms/comps/#prerequisites","title":"Prerequisites","text":""},{"location":"platforms/comps/#1-account-setup","title":"1. Account Setup","text":"<p>Contact IDM to obtain COMPS access: - COMPS account credentials - Environment access (e.g. Nibbler) - Network configuration</p>"},{"location":"platforms/comps/#2-installation","title":"2. Installation","text":"Bash<pre><code>pip install idmtools[idm]\n# or\npip install idmtools-platform-comps\n</code></pre>"},{"location":"platforms/comps/#3-authentication","title":"3. Authentication","text":"<p>COMPS needs username and password to login.</p>"},{"location":"platforms/comps/#basic-configuration","title":"Basic Configuration","text":""},{"location":"platforms/comps/#predefined-environments","title":"Predefined environments","text":"<ul> <li>SLURMSTAGE</li> <li>CALCULON</li> <li>Nibbler</li> <li>SLURM</li> <li>SLURM2</li> <li>BOXY</li> <li>...</li> </ul> <p>To see a list of aliases and configuration options using the CLI command</p> Bash<pre><code>idmtools info plugins platform-aliases\n</code></pre>"},{"location":"platforms/comps/#simple-connection","title":"Simple Connection","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\n\n# Connect to COMPS\nplatform = Platform(\n    \"COMPS\",\n    endpoint=\"https://comps.idmod.org\",\n    environment=\"Nibbler\"\n)\n</code></pre>"},{"location":"platforms/comps/#configuration-file","title":"Configuration File","text":"<p>Create <code>~/.idmtools/idmtools.ini</code>:</p> INI<pre><code>[COMPS]\ntype = COMPS\nendpoint = https://comps.idmod.org\nenvironment = Nibbler\npriority = Highest\nnum_cores = 1\nnode_group = idm_abcd\n</code></pre> <p>Create platform:</p> Python<pre><code>from idmtools.core.platform_factory import Platform\n\nplatform = Platform(\"Nibbler\")\n</code></pre>"},{"location":"platforms/comps/#running-simulations","title":"Running Simulations","text":""},{"location":"platforms/comps/#basic-example","title":"Basic Example","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools_models.python.python_task import PythonTask\n\n# Create platform\nplatform = Platform(\n    \"COMPS\",\n    endpoint=\"https://comps.idmod.org\",\n    environment=\"Nibbler\"\n)\n\n# Create task\ntask = PythonTask(\n    script_path=\"model.py\",\n    python_path=\"python3\"\n)\n\n# Create experiment\nexperiment = Experiment.from_template(\n    task,\n    name=\"My COMPS Experiment\"\n)\n\n# Run on COMPS\nexperiment.run(\n    platform=platform,\n    wait_until_done=True\n)\n\nprint(f\"Experiment ID: {experiment.id}\")\nprint(f\"COMPS URL: https://comps.idmod.org/experiments/{experiment.id}\")\n</code></pre>"},{"location":"platforms/comps/#with-parameter-sweep","title":"With Parameter Sweep","text":"<p>See Parameter Sweeps for full examples of sweeping parameters on any platform including COMPS.</p>"},{"location":"platforms/comps/#comps-specific-features","title":"COMPS-Specific Features","text":"<p>Platform Parameters:</p> Parameter Description <code>endpoint</code> URL of the COMPS endpoint. Default: <code>https://comps.idmod.org</code> <code>environment</code> COMPS environment. Options: <code>Calculon</code>, <code>Nibbler</code>, <code>SlurmStage</code>, <code>Cumulus</code> <code>priority</code> Job priority. Options: <code>Lowest</code>, <code>BelowNormal</code>, <code>Normal</code>, <code>AboveNormal</code>, <code>Highest</code> <code>node_group</code> Node group. Options: <code>None, idm_abcd</code>,<code>idm_48cores</code> <code>num_retries</code> Num of retries <code>num_cores</code> Num of cores <code>max_workers</code> Max worker <code>batch_size</code> Simulations per batch <p>For example to pass specific options priority, node group, and cores directly to <code>Platform()</code>:</p> Python<pre><code>platform = Platform('Calculon', priority='Highest', node_group=\"idm_abcd\", num_cores=1)\n</code></pre>"},{"location":"platforms/comps/#working-with-assets","title":"Working with Assets","text":""},{"location":"platforms/comps/#uploading-assets","title":"Uploading Assets","text":"Python<pre><code># Add files to experiment (shared across simulations)\nexperiment.add_asset(\"config.json\")\nexperiment.add_asset(\"large_database.db\")  # Uploaded once, shared\n\n# Add simulation-specific assets\nfor sim in experiment.simulations:\n    sim.task.add_asset(f\"input_{sim.id}.csv\")\n</code></pre>"},{"location":"platforms/comps/#assetize-outputs-workitem","title":"Assetize outputs workitem","text":"<p>Assetizing outputs lets you create an AssetCollection from the outputs of a previous Experiment, Simulation, Workitem, or other AssetCollections. The resulting AssetCollection is available on COMPS under the associated workitem and AssetCollection.  Examples can be found in examples/cookbook/comps/assetize_outputs.</p> Python<pre><code>from idmtools_platform_comps.utils.assetize_output import AssetizeOutput\n\nao = AssetizeOutput(file_patterns=[\"output.json\"], related_experiments=[experiment])\nao.run(wait_until_done=True)\n</code></pre>"},{"location":"platforms/comps/#monitoring-and-management","title":"Monitoring and Management","text":""},{"location":"platforms/comps/#check-status","title":"Check Status","text":"Python<pre><code># Refresh experiment status\nexperiment.refresh_status(platform)\n\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"platforms/comps/#query-experiments","title":"Query Experiments","text":"Python<pre><code>from idmtools.core import ItemType\n\n# Get experiment by ID\nexp = platform.get_item(\n    \"experiment-id-here\",\n    item_type=ItemType.EXPERIMENT\n)\n</code></pre>"},{"location":"platforms/comps/#downloading-results","title":"Downloading Results","text":""},{"location":"platforms/comps/#simple-download","title":"Simple Download","text":"Python<pre><code>from idmtools.core import ItemType\n\n# Get simulation object\nsimulation = platform.get_item(sim_id, ItemType.SIMULATION, raw=True)\n\n# Specify files to download\nfiles = [\"output/result.json\", \"StdOut.txt\", \"Assets/model1.py\"]\n\n# Download files to output directory\nret_files = platform.get_files(simulation, files=files, output=\"output\")\n\n# Download files from experiment\nfiles = platform.get_files(experiment, files=files, output=\"output\")\n</code></pre>"},{"location":"platforms/comps/#using-analyzers","title":"Using Analyzers","text":"<p>See Analyzing Results for full examples of using analyzers with COMPS.</p>"},{"location":"platforms/comps/#advanced-features","title":"Advanced Features","text":""},{"location":"platforms/comps/#ssmt-analyzer-on-comps","title":"SSMT Analyzer on COMPS","text":"<p>Run spatial models with SSMT:</p> Python<pre><code>from idmtools.assets import AssetCollection\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools_platform_comps.ssmt_work_items.comps_workitems import SSMTWorkItem\n\nwi_name = \"test docker image pip list\"\ncommand = \"python3 -m pip list\"\n\nif __name__ == \"__main__\":\n    with Platform('CALCULON'):\n        wi = SSMTWorkItem(name=wi_name, command=command, transient_assets=AssetCollection.from_directory(\"files\"))\n        wi.run(wait_until_done=True)\n</code></pre>"},{"location":"platforms/comps/#suites","title":"Suites","text":"<p>Group related experiments:</p> Python<pre><code>from idmtools.entities.suite import Suite\n\n# Create suite\nsuite = Suite(name=\"Complete Study\")\nsuite.add_experiment(exp1)\nsuite.add_experiment(exp2)\nsuite.add_experiment(exp3)\n\n# Run on COMPS\nsuite.run(platform=platform)\n\nprint(f\"Suite ID: {suite.uid}\")\nprint(f\"COMPS URL: https://comps.idmod.org/suites/{suite.uid}\")\n</code></pre>"},{"location":"platforms/comps/#comps-scheduling","title":"COMPS Scheduling","text":"<p>idmtools supports job scheduling on the COMPS platform for multiple scenarios depending on your research requirements.</p>"},{"location":"platforms/comps/#scheduling-scenarios","title":"Scheduling Scenarios","text":"Scenario Use Case N cores, N processes Single-threaded or MPI-enabled workloads (e.g. EMOD) N cores, 1 node, 1 process Models spawning worker threads (e.g. GenEpi) or requiring large memory 1 node, N processes High migration / interprocess communication; same-node MPI shared memory"},{"location":"platforms/comps/#configuration","title":"Configuration","text":"<p>To use scheduling, create a <code>workorder.json</code> and add it as a transient asset. This takes precedence over settings in <code>idmtools.ini</code> or runtime parameters.</p> <p>Option 1 \u2014 Existing file:</p> Python<pre><code>from idmtools_platform_comps.utils.scheduling import add_work_order\n\nadd_work_order(ts, file_path=\"path/to/WorkOrder.json\")\n</code></pre> <p>Option 2 \u2014 Dynamic creation:</p> Python<pre><code>from idmtools_platform_comps.utils.scheduling import add_schedule_config\n\nadd_schedule_config(\n    ts,\n    command=\"python -c \\\"print('hello test')\\\"\",\n    NodeGroupName=\"idm_abcd\",\n    NumCores=2,\n    NumProcesses=1,\n    NumNodes=1,\n    Environment={\"key1\": \"value1\"}\n)\n\nexperiment.run(scheduling=True)\n</code></pre>"},{"location":"platforms/comps/#hpc-cluster-workorderjson","title":"HPC Cluster \u2014 <code>workorder.json</code>","text":"JSON<pre><code>{\n  \"Command\": \"python -c \\\"print('hello test')\\\"\",\n  \"NodeGroupName\": \"idm_abcd\",\n  \"NumCores\": 1,\n  \"SingleNode\": false,\n  \"Exclusive\": false\n}\n</code></pre>"},{"location":"platforms/comps/#slurm-cluster-workorderjson","title":"Slurm Cluster \u2014 <code>workorder.json</code>","text":"JSON<pre><code>{\n  \"Command\": \"python3 Assets/model1.py\",\n  \"NodeGroupName\": \"idm_abcd\",\n  \"NumCores\": 1,\n  \"NumProcesses\": 1,\n  \"NumNodes\": 1,\n  \"Environment\": {\n    \"PYTHONPATH\": \"$PYTHONPATH:$PWD/Assets\"\n  }\n}\n</code></pre>"},{"location":"platforms/comps/#comps-cli","title":"COMPS CLI","text":"<p>Use COMPS command-line tools:</p> Bash<pre><code>idmtools comps --help\n</code></pre>"},{"location":"platforms/comps/#integration-with-other-tools","title":"Integration with Other Tools","text":""},{"location":"platforms/comps/#with-emod","title":"With EMOD","text":"Python<pre><code>from idmtools_models.emod import EmodTask\n\n# Create EMOD task\nemod_task = EmodTask.from_default()\nemod_task.set_parameter(\"Run_Number\", 0)\n\n# Run on COMPS\nexperiment = Experiment.from_template(emod_task, name=\"EMOD on COMPS\")\nexperiment.run(platform=platform)\n</code></pre>"},{"location":"platforms/comps/#next-steps","title":"Next Steps","text":"<ul> <li>User Guide - General idmtools concepts</li> <li>Tutorials - Hands-on examples</li> <li>Platform Comparison - Compare with other platforms</li> <li>Analyzers - Process COMPS results</li> </ul>"},{"location":"platforms/comps/#see-also","title":"See Also","text":"<ul> <li>[COMPS Platform API][idmtools_platform_comps.comps_platform.COMPSPlatform]</li> <li>[COMPS Operations][idmtools_platform_comps.comps_operations]</li> <li>[SSMT Work Items][idmtools_platform_comps.ssmt_work_items]</li> </ul>"},{"location":"platforms/container/","title":"Container Platform","text":"<p>Comprehensive guide to using Docker containers with idmtools for reproducible simulations.</p>"},{"location":"platforms/container/#overview","title":"Overview","text":"<p>The Container Platform allows the use of Docker containers and the ability to run jobs locally. This platform leverages Docker's containerization capabilities to provide a consistent and isolated environment for running computational tasks. The <code>ContainerPlatform</code> is responsible for managing the creation, execution, and cleanup of Docker containers used to run simulations.</p>"},{"location":"platforms/container/#key-features","title":"Key Features","text":"<ul> <li>Docker Integration: Ensures that Docker is installed and the Docker daemon is running before executing any tasks.</li> <li>Experiment and Simulation Management: Provides methods to run and manage experiments and simulations within Docker containers.</li> <li>Volume Binding: Supports binding host directories to container directories, allowing for data sharing between the host and the container.</li> <li>Container Validation: Validates the status and configuration of Docker containers to ensure they meet the platform's requirements.</li> <li>Script Conversion: Converts scripts to Linux format if the host platform is Windows, ensuring compatibility within the container environment.</li> <li>Job History Management: Keeps track of job submissions and their corresponding container IDs for easy reference and management.</li> <li>Minimal Docker image: Requires only Linux OS, Python 3, and mpich installed in the Docker image. ContainerPlatform binds the host directory to the container directory for running the simulation.</li> <li>Flexible simulation directory: Customize the simulation output folder structure by including/excluding suite, experiment, or simulation names in the path.</li> </ul>"},{"location":"platforms/container/#prerequisites","title":"Prerequisites","text":"<ul> <li>Docker installed and Docker daemon running</li> <li>Linux, or Windows with WSL2</li> <li>Python 3.10+ (64-bit)</li> </ul>"},{"location":"platforms/container/#set-up-a-virtual-environment","title":"Set up a virtual environment","text":"Bash<pre><code>python -m venv container_env\n\n# Windows\ncontainer_env\\Scripts\\activate\n\n# Linux/macOS\nsource container_env/bin/activate\n</code></pre>"},{"location":"platforms/container/#install-idmtools","title":"Install idmtools","text":"Bash<pre><code>pip install idmtools[container]\n</code></pre>"},{"location":"platforms/container/#windows-specific-setup","title":"Windows-specific setup","text":"<p>Enable Developer Mode \u2014 required for Docker to create symlinks inside containers:</p> <p>Settings \u2192 Update &amp; Security \u2192 For Developers \u2192 Select Developer Mode</p> <p>Enable long path support (if paths exceed 255 characters):</p> <p>Local Computer Policy \u2192 Computer Configuration \u2192 Administrative Templates \u2192 System \u2192 Filesystem \u2192 Enable Win32 long paths</p>"},{"location":"platforms/container/#containerplatform-attributes","title":"ContainerPlatform Attributes","text":"Attribute Description <code>job_directory</code> The directory where job data is stored. <code>docker_image</code> The Docker image to run the container. <code>extra_packages</code> Additional packages to install in the container. <code>data_mount</code> The data mount point in the container. <code>user_mounts</code> User-defined mounts for additional volume bindings. <code>container_prefix</code> Prefix for container names. <code>force_start</code> Flag to force start a new container. <code>new_container</code> Flag to start a new container. <code>include_stopped</code> Flag to include stopped containers in operations. <code>debug</code> Flag to enable debug mode. <code>container_id</code> The ID of the container being used. <code>max_job</code> The maximum number of jobs to run in parallel. <code>retries</code> The number of retries to attempt for a job. <code>ntasks</code> Number of MPI processes. If greater than 1, it triggers mpirun."},{"location":"platforms/container/#basic-usage","title":"Basic Usage","text":"<p>Create a Python file named <code>example_demo.py</code> and add the following code:</p> Python<pre><code>from idmtools.entities.command_task import CommandTask\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools_platform_container.container_platform import ContainerPlatform\n\n# Initialize the platform\nfrom idmtools.core.platform_factory import Platform\nplatform = Platform('Container', job_directory=\"destination_directory\")\n# Or\n# platform = ContainerPlatform(job_directory=\"destination_directory\")\n\n# Define task\ncommand = \"echo 'Hello, World!'\"\ntask = CommandTask(command=command)\n\n# Run an experiment\nexperiment = Experiment.from_task(task, name=\"example\")\nexperiment.run(platform=platform)\n</code></pre> <p>Run on your host machine:</p> Bash<pre><code>python example_demo.py\n</code></pre> <p>Output</p> <p></p> <p>Results saved in the <code>destination_directory</code> on the host machine:</p> <p></p> <p>Results inside the Docker container:</p> <p></p>"},{"location":"platforms/container/#attribute-examples","title":"Attribute Examples","text":""},{"location":"platforms/container/#extra_packages","title":"extra_packages","text":"<p>Install additional packages into the container at runtime:</p> Python<pre><code>from idmtools.assets import Asset, AssetCollection\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.entities.command_task import CommandTask\nfrom idmtools.entities.experiment import Experiment\nimport os\n\nplatform = Platform(\"Container\", job_directory=\"DEST\", new_container=True,\n                    extra_packages=['astor', 'numpy', 'pytest'],\n                    docker_image=\"ghcr.io/institutefordiseasemodeling/container-rocky-runtime:0.0.6\")\ncommand = \"python Assets/model_file.py\"\ntask = CommandTask(command=command)\n\nmodel_asset = Asset(absolute_path=os.path.join(\"inputs\", \"extra_packages\", \"model_file.py\"))\ncommon_assets = AssetCollection()\ncommon_assets.add_asset(model_asset)\n\nexperiment = Experiment.from_task(task, name=\"run_with_extra_packages\", assets=common_assets)\nexperiment.run(wait_until_done=True, platform=platform)\n</code></pre>"},{"location":"platforms/container/#new_container","title":"new_container","text":"<p>Force a new container to be created for each experiment:</p> Python<pre><code>with Platform(\"Container\", job_directory=\"DEST\", new_container=True) as platform:\n    experiment.run(wait_until_done=True)\n</code></pre>"},{"location":"platforms/container/#docker_image","title":"docker_image","text":"<p>Use a specific Docker image:</p> Python<pre><code>with Platform(\"Container\", job_directory=\"DEST\",\n              docker_image=\"docker-production.packages.idmod.org/idmtools/container-test:0.0.3\") as platform:\n    experiment.run(wait_until_done=True)\n</code></pre>"},{"location":"platforms/container/#force_start","title":"force_start","text":"<p>Force start a new or stopped container:</p> Python<pre><code>with Platform(\"Container\", job_directory=\"DEST\", force_start=True) as platform:\n    experiment.run(wait_until_done=True)\n</code></pre>"},{"location":"platforms/container/#user_mounts","title":"user_mounts","text":"<p>Mount additional host directories into the container:</p> Python<pre><code>import os\n\nuser_mounts = {\n    os.path.join(os.getcwd(), 'inputs', 'python_models'): \"/home/dest\",\n    os.path.dirname(os.getcwd()): \"/home/dest2\"\n}\nwith Platform(\"Container\", job_directory=\"DEST\", user_mounts=user_mounts) as platform:\n    experiment.run(wait_until_done=True)\n</code></pre>"},{"location":"platforms/container/#data_mount","title":"data_mount","text":"<p>Use a custom data mount point instead of the default <code>/home/container-data</code>:</p> Python<pre><code>with Platform(\"Container\", job_directory=\"DEST\", data_mount=\"/home/data\") as platform:\n    experiment.run(wait_until_done=True)\n</code></pre>"},{"location":"platforms/container/#container_prefix","title":"container_prefix","text":"<p>Add a prefix to container names:</p> Python<pre><code>with Platform(\"Container\", job_directory=\"DEST\", container_prefix=\"my_project\") as platform:\n    experiment.run(wait_until_done=True)\n</code></pre>"},{"location":"platforms/container/#retries","title":"retries","text":"<p>Retry failed jobs automatically:</p> Python<pre><code>from idmtools_platform_container.container_platform import ContainerPlatform\n\nwith ContainerPlatform(job_directory=\"DEST\", retries=3) as platform:\n    experiment.run(wait_until_done=True)\n</code></pre>"},{"location":"platforms/container/#folder-structure","title":"Folder Structure","text":"<p>By default, idmtools generates simulations with the following structure:</p> Text Only<pre><code>job_directory/s_&lt;suite_name&gt;_&lt;suite_uuid&gt;/e_&lt;experiment_name&gt;_&lt;experiment_uuid&gt;/&lt;simulation_uuid&gt;\n</code></pre> <ul> <li><code>job_directory</code> \u2014 base directory for all output</li> <li><code>s_&lt;suite_name&gt;_&lt;uuid&gt;</code> \u2014 suite directory (name truncated to 30 characters, prefixed with <code>s_</code>)</li> <li><code>e_&lt;experiment_name&gt;_&lt;uuid&gt;</code> \u2014 experiment directory (name truncated to 30 characters, prefixed with <code>e_</code>)</li> <li><code>&lt;simulation_uuid&gt;</code> \u2014 simulation directory (UUID only)</li> </ul> <p>If no suite is specified:</p> Text Only<pre><code>job_directory/e_&lt;experiment_name&gt;_&lt;experiment_uuid&gt;/&lt;simulation_uuid&gt;\n</code></pre> <p>Example \u2014 given suite name <code>my_very_long_suite_name_for_malaria_experiment</code> and experiment name <code>test_experiment_with_calibration_phase</code>:</p> Text Only<pre><code>job_directory/\n\u2514\u2500\u2500 s_my_very_long_suite_name_for_m_12345678-9abc-def0-1234-56789abcdef0/\n    \u2514\u2500\u2500 e_test_experiment_with_calibrati_abcd1234-5678-90ef-abcd-1234567890ef/\n        \u2514\u2500\u2500 7c9e6679-7425-40de-944b-e07fc1f90ae7/\n</code></pre> <p>No-suite case:</p> Text Only<pre><code>job_directory/\n\u2514\u2500\u2500 e_test_experiment_with_calibrati_abcd1234-5678-90ef-abcd-1234567890ef/\n    \u2514\u2500\u2500 7c9e6679-7425-40de-944b-e07fc1f90ae7/\n</code></pre> <p>You can customize the folder structure in <code>idmtools.ini</code>:</p> <ul> <li><code>name_directory = False</code> \u2014 exclude suite and experiment names from the path</li> <li><code>sim_name_directory = True</code> \u2014 include the simulation name in the path</li> </ul> <p>Results inside the container are at <code>/home/container-data/&lt;suite_path&gt;/&lt;experiment_path&gt;/&lt;simulation_path&gt;</code>.</p> <p>Windows path length</p> <p>Windows has a 255-character path limit. If needed, enable long path support via the Windows Group Policy Editor.</p>"},{"location":"platforms/container/#docker-image","title":"Docker Image","text":"<p>The default Docker image for <code>ContainerPlatform</code> is based on Rocky Linux 9.2 and includes:</p> <ul> <li>Python 3.9</li> <li>mpich 4.1.1</li> <li>numpy, pandas, scipy, matplotlib, and other common libraries for science community</li> </ul> <p>The image is automatically built and published via GitHub Actions. You do not need to build it yourself.</p> <p>To use a specific image:</p> Python<pre><code>platform = Platform('Container', job_directory='any_dir',\n                    docker_image='my_docker_image:x.x.x')\n</code></pre>"},{"location":"platforms/container/#extend-the-docker-image","title":"Extend the Docker image","text":"<p>To build a custom image based on the default runtime:</p> Docker<pre><code>FROM ghcr.io/institutefordiseasemodeling/container-rocky-runtime:0.0.6\n\n# Add your dependencies here\nRUN pip install my-package\n</code></pre> <p>Build it and use it:</p> Python<pre><code>platform = Platform('Container', job_directory='any_dir', docker_image='your_own_image_name:x.x.x')\n</code></pre>"},{"location":"platforms/container/#build-and-publish-developers-only","title":"Build and publish (developers only)","text":"<p>Bash<pre><code># Build\npython build_container_image.py\n\n# Push\npython build_container_image.py --push\n</code></pre> Note: Build image script need GITHUB_TOKEN with read/write permission</p>"},{"location":"platforms/container/#docker-utilities","title":"Docker Utilities","text":"<p>The <code>docker_operations.py</code> module provides utilities to manage Docker containers within <code>ContainerPlatform</code>.</p>"},{"location":"platforms/container/#key-functions","title":"Key functions","text":"Function Description <code>validate_container_running(platform)</code> Checks daemon, finds or starts a container <code>get_container(container_id)</code> Retrieves a container object by ID <code>find_container_by_image(image)</code> Finds containers matching a given image <code>stop_container(container, remove=True)</code> Stops and optionally removes a container <code>stop_all_containers(containers)</code> Stops all specified containers <code>restart_container(container)</code> Restarts a container <code>is_docker_installed()</code> Checks if Docker is installed <code>is_docker_daemon_running()</code> Checks if the Docker daemon is running <code>check_local_image(image_name)</code> Checks if an image exists locally <code>pull_docker_image(image_name)</code> Pulls an image from the registry <code>list_running_jobs(container_id)</code> Lists running jobs on a container <code>find_running_job(item_id)</code> Finds a running job by item ID"},{"location":"platforms/container/#example","title":"Example","text":"Python<pre><code>from idmtools_platform_container.container_operations.docker_operations import (\n    validate_container_running, get_container, stop_container\n)\n\n# Validate and start a container\ncontainer_id = validate_container_running(platform)\n\n# Retrieve a container object\ncontainer = get_container(container_id)\n\n# Stop a container\nstop_container(container)\n</code></pre>"},{"location":"platforms/container/#limitations","title":"Limitations","text":"<p>Unsupported features</p> <ul> <li>WorkItem is not supported on the Container Platform.</li> <li> <p>AssetCollection creation or referencing an existing <code>AssetCollection</code> is not supported. If migrating from COMPS, remove code like:</p> Python<pre><code># Remove this when using Container Platform\nasset_collection = AssetCollection.from_asset_collection_id('50002755-...')\n</code></pre> </li> <li> <p>Singularity is not needed with Container Platform. If migrating from COMPS, remove Singularity setup code:</p> Python<pre><code># Remove this when using Container Platform\nemod_task.set_sif(sif_path)\n</code></pre> </li> </ul>"},{"location":"platforms/container/#next-steps","title":"Next Steps","text":"<ul> <li>Tutorials - More detailed tutorials</li> <li>User Guide - General concepts</li> <li>Platform Comparison - Compare available platforms</li> </ul>"},{"location":"platforms/container/#see-also","title":"See Also","text":"<ul> <li>Docker Documentation</li> </ul>"},{"location":"platforms/slurm/","title":"Slurm","text":"<p>from examples.native_slurm.slurm_job.example_analyzer import job_directory</p>"},{"location":"platforms/slurm/#slurm-platform","title":"Slurm Platform","text":"<p>Comprehensive guide to using idmtools with Slurm HPC clusters.</p>"},{"location":"platforms/slurm/#overview","title":"Overview","text":"<p>Slurm (Simple Linux Utility for Resource Management) is a popular open-source workload manager for HPC clusters. idmtools provides seamless integration with Slurm clusters, allowing you to submit and manage large-scale simulation workflows.</p>"},{"location":"platforms/slurm/#key-features","title":"Key Features","text":"<ul> <li>HPC Integration: Use existing cluster infrastructure</li> <li>Resource Management: Request specific CPU, memory, and GPU resources</li> <li>Queue Control: Submit to different partitions/queues</li> <li>Job Arrays: Efficient batch job submission</li> <li>Module System: Integration with environment modules</li> <li>Shared Storage: Leverage shared filesystems</li> </ul>"},{"location":"platforms/slurm/#prerequisites","title":"Prerequisites","text":""},{"location":"platforms/slurm/#1-cluster-access","title":"1. Cluster Access","text":"<ul> <li>SSH access to Slurm head node</li> <li>Valid cluster account</li> <li>Appropriate partition/queue permissions</li> <li>Shared filesystem access (e.g., /home, /scratch)</li> </ul>"},{"location":"platforms/slurm/#2-installation","title":"2. Installation","text":"<p>On your local machine: Bash<pre><code>pip install idmtools[slurm]\n</code></pre></p> <p>On the cluster (if needed): Bash<pre><code># Load Python module (cluster-dependent)\nmodule load python/3.11\n\n# Install idmtools\npip install --user idmtools[slurm]\n</code></pre></p>"},{"location":"platforms/slurm/#3-ssh-configuration","title":"3. SSH Configuration","text":"<p>Setup passwordless SSH (recommended): Bash<pre><code># Generate SSH key\nssh-keygen -t rsa -b 4096\n\n# Copy to cluster\nssh-copy-id username@cluster.example.com\n\n# Test connection\nssh username@cluster.example.com \"hostname\"\n</code></pre></p>"},{"location":"platforms/slurm/#verify-slurm-is-running","title":"Verify Slurm is Running","text":"<p>Before submitting jobs, verify your Slurm cluster is available:</p> Bash<pre><code>sinfo -a\n</code></pre> <p>Expected output:</p> Text Only<pre><code>PARTITION AVAIL  TIMELIMIT  NODES  STATE NODELIST\nLocalQ*      up   infinite      1   idle localhost\n</code></pre>"},{"location":"platforms/slurm/#basic-configuration","title":"Basic Configuration","text":""},{"location":"platforms/slurm/#connection-configuration","title":"Connection Configuration","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\n\n# Create Slurm platform\nplatform = Platform(\n    \"Slurm\",\n    host=\"cluster.example.com\",\n    username=\"myusername\",\n    job_directory=\"/home/myusername/idmtools_jobs\"\n)\n</code></pre>"},{"location":"platforms/slurm/#minimum-configuration","title":"Minimum Configuration","text":"<p>Minimum required in <code>idmtools.ini</code>:</p> INI<pre><code>[SLURM_LOCAL]\ntype = SLURM\njob_directory = /home/userxyz/experiments\n</code></pre> <p>Or directly from code:</p> Python<pre><code>Platform('SLURM_LOCAL', job_directory='/home/userxyz/experiments')\n</code></pre>"},{"location":"platforms/slurm/#full-configuration-file","title":"Full Configuration File","text":"<p>Create <code>~/.idmtools/idmtools.ini</code>:</p> INI<pre><code>[Slurm]\ntype = Slurm\nhost = cluster.example.com\nusername = myusername\njob_directory = /home/myusername/idmtools_jobs\npartition = general\naccount = myproject\ntime_limit = 01:00:00\ncpus_per_task = 1\nmem_per_cpu = 4G\n</code></pre> <p>Load configuration:</p> Python<pre><code>platform = Platform(\"Slurm_Local\")\n</code></pre>"},{"location":"platforms/slurm/#slurmplatform-attributes","title":"SlurmPlatform Attributes","text":"<p>All attributes from <code>SlurmPlatform</code> in <code>slurm_platform.py</code>:</p> Attribute Description <code>mail_type</code> Email notification type (e.g. <code>BEGIN</code>, <code>END</code>, <code>FAIL</code>) <code>mail_user</code> Email address for job notifications <code>nodes</code> Number of nodes to request <code>ntasks</code> Number of tasks <code>cpus_per_task</code> Number of CPUs per task <code>ntasks_per_core</code> Number of tasks per core <code>max_running_jobs</code> Maximum running jobs per experiment <code>mem</code> Memory per node in MB <code>mem_per_cpu</code> Memory per CPU in MB <code>partition</code> Slurm partition/queue to submit to <code>constraint</code> Compute node constraint <code>time</code> Job time limit (e.g. <code>01:00:00</code>) <code>account</code> Account to charge for the job <code>exclusive</code> Nodes cannot be shared with other jobs/users <code>requeue</code> Allow job to be requeued if a node fails <code>retries</code> Default number of retries for failed jobs <code>sbatch_custom</code> Custom commands to append to the sbatch script <code>modules</code> Environment modules to load before execution <code>dir_exist_ok</code> Allow job directories to already exist <code>array_batch_size</code> Maximum Slurm job array size <code>propogate_slurm_env_var</code> Propagate inherited SLURM env vars into generated scripts <code>run_on_slurm</code> Submit the current script itself as a Slurm job <code>mpi_type</code> MPI type: <code>pmi2</code>, <code>pmix</code> (Slurm MPI), or <code>mpirun</code> (independent MPI) <p>See the sbatch documentation for full details.</p>"},{"location":"platforms/slurm/#running-simulations","title":"Running Simulations","text":""},{"location":"platforms/slurm/#basic-example","title":"Basic Example","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools_models.python.python_task import PythonTask\n\n# Create platform\nplatform = Platform(\n    \"Slurm_Local\",\n    job_directory=\"/scratch/myusername/jobs\"\n)\n\n# Create task\ntask = PythonTask(\n    script_path=\"model.py\",\n    python_path=\"python3\"\n)\n\n# Set parameters\ntask.parameters = {\n    \"population\": 10000,\n    \"beta\": 0.5,\n    \"gamma\": 0.1\n}\n\n# Create experiment\nexperiment = Experiment.from_task(\n    task,\n    name=\"Slurm Experiment\"\n)\n\n# Run on Slurm\nexperiment.run(\n    platform=platform,\n    wait_until_done=True\n)\n\nprint(f\"Experiment ID: {experiment.uid}\")\n</code></pre>"},{"location":"platforms/slurm/#job-arrays","title":"Job Arrays","text":"<p>idmtools automatically uses Slurm job arrays for efficiency:</p> Python<pre><code>from idmtools.builders import SimulationBuilder\n\n# Create parameter sweep\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(\n    lambda sim, beta: sim.task.set_parameter(\"beta\", beta),\n    [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9]\n)\n\nexperiment = Experiment.from_builder(\n    builder,\n    task,\n    name=\"Slurm Array Job\"\n)\n\n# Submits as single job array (9 tasks)\nexperiment.run(platform=platform, wait_until_done=True)\n\n# Check job status\n# $ squeue -u myusername\n# JOBID   USER    PARTITION  NAME        ST  TIME\n# 12345_[1-9]  myuser  compute   Slurm_Array  PD  0:00\n</code></pre>"},{"location":"platforms/slurm/#environment-configuration","title":"Environment Configuration","text":""},{"location":"platforms/slurm/#module-loading","title":"Module Loading","text":"Python<pre><code># Load required modules\nplatform.modules = [\"python/3.11\", \"gcc/11.2\", \"openmpi/4.1\"]\n\n# Modules loaded automatically before job execution\n</code></pre>"},{"location":"platforms/slurm/#working-with-partitionsqueues","title":"Working with Partitions/Queues","text":""},{"location":"platforms/slurm/#partition-selection","title":"Partition Selection","text":"Python<pre><code># Submit to specific partition\nplatform.partition = \"compute\"  # or \"gpu\", \"bigmem\", \"debug\", etc.\n</code></pre>"},{"location":"platforms/slurm/#accountproject","title":"Account/Project","text":"Python<pre><code># Charge to specific account\nplatform.account = \"proj12345\"\n</code></pre>"},{"location":"platforms/slurm/#file-management","title":"File Management","text":""},{"location":"platforms/slurm/#working-directory","title":"Working Directory","text":"Python<pre><code># Set job working directory\nplatform = Platform(\n    \"Slurm_Local\",\n    job_directory=\"/scratch/myuser/jobs\"  # Fast scratch filesystem\n)\n</code></pre>"},{"location":"platforms/slurm/#asset-handling","title":"Asset Handling","text":"Python<pre><code># Assets are copied to job directory\nexperiment.add_asset(\"config.json\")\nexperiment.add_asset(\"input_data.csv\")\n</code></pre>"},{"location":"platforms/slurm/#monitoring-and-management","title":"Monitoring and Management","text":""},{"location":"platforms/slurm/#check-job-status","title":"Check Job Status","text":"Python<pre><code># Refresh experiment status\nexperiment.refresh_status(platform)\n\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"platforms/slurm/#cancel-jobs","title":"Cancel Jobs","text":"<p>idmtools submits jobs as Slurm job arrays. Use the <code>scancel</code> command on the cluster to cancel them.</p> <p>View jobs in the queue:</p> Bash<pre><code>squeue\n</code></pre> <p>Cancel a specific task (job array ID + index):</p> Bash<pre><code>scancel &lt;job-id&gt;_&lt;index&gt;\n</code></pre> <p>Cancel all tasks in a job array:</p> Bash<pre><code>scancel &lt;job-id&gt;\n</code></pre> <p>See the scancel documentation for full details.</p>"},{"location":"platforms/slurm/#job-information","title":"Job Information","text":"Bash<pre><code># Check job status (on cluster)\nsqueue -u myusername\n\n# Detailed job info\nscontrol show job &lt;job_id&gt;\n\n# Job history\nsacct -u myusername --starttime=2024-01-01\n\n# Job efficiency\nseff &lt;job_id&gt;\n</code></pre>"},{"location":"platforms/slurm/#mpiparallel-jobs","title":"MPI/Parallel Jobs","text":""},{"location":"platforms/slurm/#openmpi","title":"OpenMPI","text":"Python<pre><code># MPI job configuration\ntask = CommandTask(\n    command=\"mpirun -np 32 ./parallel_model\"\n)\n\nexperiment = Experiment.from_template(task, name=\"MPI Job\")\nplatform = Platform(\"Slurm_local\", job_directory =\".\", mpi_type = \"pmi2\", nodes=2, ntasks_per_node=16, modules=[\"openmpi/4.1\"])\nexperiment.run(platform=platform, wait_until_done=True)\n</code></pre>"},{"location":"platforms/slurm/#troubleshooting","title":"Troubleshooting","text":""},{"location":"platforms/slurm/#ssh-connection-issues","title":"SSH Connection Issues","text":"Python<pre><code># Test SSH connection\nimport paramiko\n\nssh = paramiko.SSHClient()\nssh.load_system_host_keys()\ntry:\n    ssh.connect(\"cluster.example.com\", username=\"myuser\")\n    print(\"Connection successful\")\nexcept Exception as e:\n    print(f\"Connection failed: {e}\")\nfinally:\n    ssh.close()\n</code></pre>"},{"location":"platforms/slurm/#job-submission-failures","title":"Job Submission Failures","text":"Bash<pre><code># Check Slurm configuration\nsinfo\n\n# Check partition access\nsinfo -p &lt;partition_name&gt;\n\n# Check account balance (if applicable)\nsshare -A &lt;account_name&gt;\n</code></pre>"},{"location":"platforms/slurm/#limitations","title":"Limitations","text":"<p>Unsupported features</p> <ul> <li>WorkItems are not supported on the Slurm platform.</li> <li> <p>AssetCollection creation or referencing an existing <code>AssetCollection</code> is not supported. If migrating from COMPS, remove code like:</p> Python<pre><code># Remove this when using Slurm Platform\nasset_collection = AssetCollection.from_asset_collection_id('...')\n</code></pre> </li> </ul>"},{"location":"platforms/slurm/#recommendations","title":"Recommendations","text":"<ul> <li>Back up simulation results regularly \u2014 scratch filesystems are often purged on clusters.</li> <li>Use appropriate partitions: <code>debug</code> for short tests, <code>compute</code> for production runs.</li> <li>Monitor resource usage with <code>seff &lt;job_id&gt;</code> after jobs complete to optimize future requests.</li> </ul>"},{"location":"platforms/slurm/#next-steps","title":"Next Steps","text":"<ul> <li>User Guide - General concepts</li> <li>Tutorials - Hands-on examples</li> <li>Platform Comparison - Compare platforms</li> <li>Analyzers - Process results</li> </ul>"},{"location":"platforms/slurm/#see-also","title":"See Also","text":"<ul> <li>Official Slurm Documentation</li> </ul>"},{"location":"tutorials/","title":"Tutorials","text":"<p>Step-by-step tutorials for common idmtools workflows.</p>"},{"location":"tutorials/#available-tutorials","title":"Available Tutorials","text":""},{"location":"tutorials/#models","title":"Models","text":"<ul> <li>Python Models - Create Python-based models</li> <li>Singularity Containers - Run models in Singularity containers</li> </ul>"},{"location":"tutorials/#advanced","title":"Advanced","text":"<ul> <li>Parameter Sweeps - Systematic parameter exploration</li> <li>Filter Simulations - Search simulations by tags</li> <li>Coming soon: Calibration, Optimization, and more</li> </ul>"},{"location":"tutorials/#tutorial-format","title":"Tutorial Format","text":"<p>Each tutorial includes:</p> <ul> <li>Prerequisites - What you need to know</li> <li>Learning Objectives - What you'll learn</li> <li>Step-by-Step Instructions - Detailed walkthrough</li> <li>Complete Code - Working examples</li> <li>Next Steps - Where to go from here</li> </ul>"},{"location":"tutorials/#need-help","title":"Need Help?","text":"<p>If you get stuck:</p> <ol> <li>Check the User Guide</li> <li>See the FAQ</li> <li>Review the API Reference</li> </ol>"},{"location":"tutorials/filter-simulations/","title":"Filtering Simulations by Tags","text":"<p>Filter simulations from a completed experiment or suite using tag-based criteria.</p>"},{"location":"tutorials/filter-simulations/#overview","title":"Overview","text":"<p>After running an experiment, you can retrieve specific simulations by filtering on their tags. Filters support:</p> <ul> <li><code>Exact matches</code> \u2014 <code>\"beta\": 0.5</code></li> <li><code>String/numeric equivalence</code> \u2014 <code>\"beta\": \"0.5\"</code> matches <code>0.5</code></li> <li><code>Callable filters</code> \u2014 <code>lambda v: 1 &lt;= v &lt;= 5</code> for range queries</li> </ul> <p>There are two ways to filter:</p> <ul> <li><code>experiment.get_simulations_by_tags()</code> \u2014 filter from the experiment object</li> <li><code>platform.filter_simulations_by_tags()</code> \u2014 filter via the platform directly</li> </ul>"},{"location":"tutorials/filter-simulations/#experiment-level-filtering","title":"Experiment-Level Filtering","text":"Python<pre><code>from idmtools.core import ItemType\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.entities.simulation import Simulation\n\nplatform = Platform(\"Container\", job_directory=\"DEST\")\n\nexperiment = platform.get_item(\"your-experiment-id\", ItemType.EXPERIMENT)\n\n# Filter by exact tag value\nfilter_ids = experiment.get_simulations_by_tags(\n    tags={\"beta\": 0.5, \"sim_tag\": \"test_tag\"})\n\n# Filter by range using a lambda\nfilter_ids2 = experiment.get_simulations_by_tags(\n    tags={\"a\": lambda v: 1 &lt;= v &lt;= 5, \"sim_tag\": \"test_tag\"})\n\n# Alternative: filter via the platform method\nfilter_ids_p = platform.filter_simulations_by_tags(\n    experiment.id, item_type=ItemType.EXPERIMENT,\n    tags={\"a\": lambda v: 1 &lt;= v &lt;= 5, \"sim_tag\": \"test_tag\"})\n\nprint(f\"Matched {len(filter_ids2)} simulations\")\n</code></pre>"},{"location":"tutorials/filter-simulations/#return-simulation-objects","title":"Return Simulation Objects","text":"<p>By default, filtering returns simulation IDs. Use <code>entity_type=True</code> to get full <code>Simulation</code> objects:</p> Python<pre><code># Get simulation entities instead of IDs\nsimulations = experiment.get_simulations_by_tags(\n    tags={\"a\": lambda v: 1 &lt;= v &lt;= 5, \"sim_tag\": \"test_tag\"},\n    entity_type=True)\n\nfor sim in simulations:\n    print(sim.tags)\n</code></pre>"},{"location":"tutorials/filter-simulations/#suite-level-filtering","title":"Suite-Level Filtering","text":"<p>Filter simulations across all experiments in a suite:</p> Python<pre><code># Get suite from experiment\nsuite = experiment.suite\n\n# Filter across all experiments in the suite\n# Returns a dict of {experiment_id: [simulations]}\nsuite_results = suite.get_simulations_by_tags(\n    tags={\"a\": lambda v: 1 &lt;= v &lt;= 5, \"sim_tag\": \"test_tag\"},\n    entity_type=True)\n\nfor exp_id, sims in suite_results.items():\n    print(f\"Experiment {exp_id}: {len(sims)} matching simulations\")\n    for sim in sims:\n        print(sim.tags)\n\n# Alternative: filter via platform method\nsuite_results_p = platform.filter_simulations_by_tags(\n    suite.id, item_type=ItemType.SUITE,\n    tags={\"a\": lambda v: 1 &lt;= v &lt;= 5, \"sim_tag\": \"test_tag\"},\n    entity_type=True)\n</code></pre>"},{"location":"tutorials/filter-simulations/#next-steps","title":"Next Steps","text":"<ul> <li>Parameter Sweeps - Tag simulations during sweeps for easy filtering</li> <li>Analyzing Results - Analyze filtered simulation outputs</li> </ul>"},{"location":"tutorials/parameter-sweeps/","title":"Parameter Sweeps","text":"<p>Systematic parameter exploration with idmtools.</p>"},{"location":"tutorials/parameter-sweeps/#part-1-simple-single-parameter-sweep","title":"Part 1: Simple Single-Parameter Sweep","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools_models.python.python_task import PythonTask\n\nplatform = Platform(\"Container\", job_directory=\"DEST\")\n\ntask = PythonTask(script_path=\"inputs/run_model_and_plot.py\")\ntask.transient_assets.add_asset(\"inputs/sir-model-config.py\")\n\n# Set base parameters shared across all simulations\ntask.parameters = {\n    \"gamma\": 0.1,\n    \"days\": 160,\n    \"population\": 10000\n}\n\nbuilder = SimulationBuilder()\n\nbeta_values = [0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9]\n\ndef set_beta_parameter(simulation, beta):\n    simulation.task.parameters[\"beta\"] = beta\n    simulation.tags[\"beta\"] = beta  # tag for filtering during analysis\n\nbuilder.add_sweep_definition(set_beta_parameter, beta_values)\n\nexperiment = Experiment.from_builder(\n    builder,\n    task,\n    name=\"Single Parameter Sweep\"\n)\n\nexperiment.run(platform=platform, wait_until_done=True)\n\nprint(f\"Experiment ID: {experiment.id}\")\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"tutorials/parameter-sweeps/#part-2-two-dimensional-grid-sweep","title":"Part 2: Two-Dimensional Grid Sweep","text":"<p>Sweeps all combinations of <code>beta</code> and <code>gamma</code>:</p> Python<pre><code>from itertools import product\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools.entities.experiment import Experiment\n\nbeta_values = [0.3, 0.4, 0.5, 0.6, 0.7]\ngamma_values = [0.05, 0.1, 0.15, 0.2]\n\n# generate all (beta, gamma) pairs\ncombinations = list(product(beta_values, gamma_values))\n\ndef set_params(simulation, params):\n    beta, gamma = params\n    simulation.task.set_parameter(\"beta\", beta)\n    simulation.task.set_parameter(\"gamma\", gamma)\n    simulation.tags[\"beta\"] = beta\n    simulation.tags[\"gamma\"] = gamma\n    simulation.tags[\"R0\"] = beta / gamma  # derived tag useful for analysis\n    simulation.name = f\"beta_{beta:.2f}_gamma_{gamma:.2f}\"\n\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(set_params, combinations)\n\n# Creates 5 \u00d7 4 = 20 simulations\nexperiment = Experiment.from_builder(builder, task, name=\"2D Grid Sweep\")\nexperiment.run(platform=platform, wait_until_done=True)\n</code></pre>"},{"location":"tutorials/parameter-sweeps/#part-3-multi-dimensional-sweep","title":"Part 3: Multi-Dimensional Sweep","text":"<p>Sweeps four parameters:</p> Python<pre><code>from itertools import product\nimport numpy as np\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools.entities.experiment import Experiment\n\nparams = {\n    \"beta\": np.linspace(0.3, 0.7, 5),\n    \"gamma\": np.linspace(0.05, 0.2, 4),\n    \"population\": [1000, 5000, 10000],\n    \"initial_infected\": [1, 10, 50]\n}\n\n# full factorial: all combinations across all four parameters\ncombinations = list(product(\n    params[\"beta\"],\n    params[\"gamma\"],\n    params[\"population\"],\n    params[\"initial_infected\"]\n))\n\nprint(f\"Total combinations: {len(combinations)}\")  # 5\u00d74\u00d73\u00d73 = 180\n\ndef set_all_params(simulation, params):\n    beta, gamma, pop, init_inf = params\n    simulation.task.set_parameter(\"beta\", beta)\n    simulation.task.set_parameter(\"gamma\", gamma)\n    simulation.task.set_parameter(\"population\", pop)\n    simulation.task.set_parameter(\"initial_infected\", init_inf)\n    simulation.tags = {\n        \"beta\": beta,\n        \"gamma\": gamma,\n        \"population\": pop,\n        \"initial_infected\": init_inf,\n        \"R0\": beta / gamma\n    }\n    simulation.name = f\"N{pop}_beta{beta:.2f}_gamma{gamma:.2f}_init_inf{init_inf}\"\n\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(set_all_params, combinations)\n\nexperiment = Experiment.from_builder(builder, task, name=\"Multi-Dimensional Factorial\")\nexperiment.run(platform=platform, wait_until_done=True)\n</code></pre>"},{"location":"tutorials/parameter-sweeps/#part-4-latin-hypercube-sampling","title":"Part 4: Latin Hypercube Sampling","text":"<p>Efficiently samples high-dimensional parameter spaces:</p> Python<pre><code>from scipy.stats import qmc\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools.entities.experiment import Experiment\n\nn_params = 4\nn_samples = 100\n\n# LHS fills the parameter space more evenly than random sampling\nsampler = qmc.LatinHypercube(d=n_params)\nsample = sampler.random(n=n_samples)\n\nparam_bounds = {\n    \"beta\": (0.1, 0.9),\n    \"gamma\": (0.05, 0.3),\n    \"population\": (1000, 100000),\n    \"days\": (100, 365)\n}\n\n# scale unit hypercube samples to actual parameter ranges\nbounds_lower = [v[0] for v in param_bounds.values()]\nbounds_upper = [v[1] for v in param_bounds.values()]\nscaled_samples = qmc.scale(sample, bounds_lower, bounds_upper)\n\nparam_names = list(param_bounds.keys())\nparam_sets = []\nfor sample_vals in scaled_samples:\n    param_dict = {name: val for name, val in zip(param_names, sample_vals)}\n    param_dict[\"population\"] = int(param_dict[\"population\"])  # must be integer\n    param_dict[\"days\"] = int(param_dict[\"days\"])\n    param_sets.append(param_dict)\n\ndef set_lhs_params(simulation, params):\n    for key, value in params.items():\n        simulation.task.set_parameter(key, value)\n    simulation.tags.update(params)\n    simulation.tags[\"R0\"] = params[\"beta\"] / params[\"gamma\"]\n\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(set_lhs_params, param_sets)\n\nexperiment = Experiment.from_builder(builder, task, name=\"Latin Hypercube Sampling\")\nexperiment.run(platform=platform, wait_until_done=True)\n</code></pre>"},{"location":"tutorials/parameter-sweeps/#part-5-scenario-based-sweep","title":"Part 5: Scenario-Based Sweep","text":"<p>Organizes sweeps by named scenarios:</p> Python<pre><code>from itertools import product\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools.entities.experiment import Experiment\n\nscenarios = {\n    \"baseline\": {\n        \"intervention\": False,\n        \"beta\": [0.5, 0.6, 0.7],\n        \"gamma\": [0.1, 0.15],\n    },\n    \"masks\": {\n        \"intervention\": True,\n        \"beta\": [0.3, 0.4, 0.5],  # reduced transmission\n        \"gamma\": [0.1, 0.15],\n    },\n    \"lockdown\": {\n        \"intervention\": True,\n        \"beta\": [0.1, 0.2, 0.3],  # strongly reduced transmission\n        \"gamma\": [0.1, 0.15],\n    },\n}\n\n# flatten all scenarios into a single list of parameter dicts\nall_params = []\nfor scenario_name, config in scenarios.items():\n    for beta, gamma in product(config[\"beta\"], config[\"gamma\"]):\n        all_params.append({\n            \"scenario\": scenario_name,\n            \"intervention\": config[\"intervention\"],\n            \"beta\": beta,\n            \"gamma\": gamma,\n            \"R0\": beta / gamma\n        })\n\nprint(f\"Total parameter sets: {len(all_params)}\")\n\ndef set_scenario_params(simulation, params):\n    simulation.task.set_parameter(\"beta\", params[\"beta\"])\n    simulation.task.set_parameter(\"gamma\", params[\"gamma\"])\n    simulation.task.set_parameter(\"intervention\", params[\"intervention\"])\n    simulation.tags = params  # store all params as tags for easy filtering\n    simulation.name = f\"{params['scenario']}_beta{params['beta']:.2f}\"\n\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(set_scenario_params, all_params)\n\nexperiment = Experiment.from_builder(builder, task, name=\"Scenario-Based Sweep\")\nexperiment.run(platform=platform, wait_until_done=True)\n\nprint(f\"Experiment ID: {experiment.id}\")\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"tutorials/parameter-sweeps/#next-steps","title":"Next Steps","text":"<ul> <li>Creating Simulations &amp; Experiments - Core concepts</li> <li>Analyzing Results - Process sweep results</li> <li>Python Models - Model implementation examples</li> </ul>"},{"location":"tutorials/python-models/","title":"Python Models Tutorial","text":"<p>Learn how to create and run Python-based simulations with idmtools.</p>"},{"location":"tutorials/python-models/#overview","title":"Overview","text":"<p>This tutorial demonstrates how to use JSONConfiguredPythonTask to run Python models on various compute platforms. We'll build a simple SIR (Susceptible-Infected-Recovered) epidemiological model.</p>"},{"location":"tutorials/python-models/#prerequisites","title":"Prerequisites","text":"<p>Install the package for your target platform:</p> Bash<pre><code>pip install idmtools[idm]        # COMPS platform\npip install idmtools[container]  # Container platform (local Docker)\npip install idmtools[slurm]      # Slurm platform\npip install idmtools[full]       # All platforms\n</code></pre>"},{"location":"tutorials/python-models/#step-1-create-your-model","title":"Step 1: Create Your Model","text":"<p>First, create a simple SIR model in <code>sir_model.py</code>:</p> Python<pre><code># sir_model.py\nimport sys\nimport json\nimport matplotlib.pyplot as plt\n\ndef sir_model(N, beta, gamma, days, initial_infected=1):\n    \"\"\"\n    Simple SIR model implementation.\n\n    Parameters:\n    - N: Total population\n    - beta: Transmission rate\n    - gamma: Recovery rate\n    - days: Number of days to simulate\n    - initial_infected: Initial number of infected individuals\n    \"\"\"\n    # Initialize compartments\n    S = N - initial_infected\n    I = initial_infected\n    R = 0\n\n    # Store time series\n    S_history = [S]\n    I_history = [I]\n    R_history = [R]\n\n    # Run simulation\n    for day in range(days):\n        # Calculate new infections and recoveries\n        new_infections = beta * S * I / N\n        new_recoveries = gamma * I\n\n        # Update compartments\n        S -= new_infections\n        I += new_infections - new_recoveries\n        R += new_recoveries\n\n        # Store results\n        S_history.append(S)\n        I_history.append(I)\n        R_history.append(R)\n\n    # Save results\n    results = {\n        \"S\": S_history,\n        \"I\": I_history,\n        \"R\": R_history,\n        \"final_infected_total\": R,\n        \"peak_infected\": max(I_history),\n        \"peak_day\": I_history.index(max(I_history))\n    }\n\n    with open(\"output.json\", \"w\") as f:\n        json.dump(results, f, indent=2)\n\n    # Create plot\n    plt.figure(figsize=(10, 6))\n    plt.plot(S_history, label=\"Susceptible\", color=\"blue\")\n    plt.plot(I_history, label=\"Infected\", color=\"red\")\n    plt.plot(R_history, label=\"Recovered\", color=\"green\")\n    plt.xlabel(\"Days\")\n    plt.ylabel(\"Number of Individuals\")\n    plt.title(f\"SIR Model: \u03b2={beta:.3f}, \u03b3={gamma:.3f}\")\n    plt.legend()\n    plt.grid(True)\n    plt.savefig(\"sir_curve.png\", dpi=150)\n    plt.close()\n\n    print(f\"Simulation complete: Peak infected = {max(I_history):.0f} on day {I_history.index(max(I_history))}\")\n\n    return results\n\nif __name__ == \"__main__\":\n    # Read parameters from command line or config file\n    if len(sys.argv) &gt; 1:\n        # Read from config file\n        with open(sys.argv[1], \"r\") as f:\n            config = json.load(f)\n    else:\n        # Default parameters\n        config = {\n            \"N\": 10000,\n            \"beta\": 0.5,\n            \"gamma\": 0.1,\n            \"days\": 160\n        }\n\n    # Run model\n    sir_model(**config)\n</code></pre>"},{"location":"tutorials/python-models/#step-2-create-idmtools-script","title":"Step 2: Create idmtools Script","text":"<p>Create <code>run_python_sir.py</code> to run the model with idmtools:</p> Python<pre><code># run_python_sir.py\nfrom idmtools.assets import AssetCollection\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.entities.templated_simulation import TemplatedSimulations\nfrom idmtools_models.python.json_python_task import JSONConfiguredPythonTask\n\n# Create platform\nplatform = Platform(\"Container\", job_directory=\"DEST\")\n\ntask = JSONConfiguredPythonTask(script_path=\"sir_model.py\")\n\n# Set parameters\ntask.parameters = {\n    \"N\": 10000,\n    \"beta\": 0.5,\n    \"gamma\": 0.1,\n    \"days\": 160\n}\nts = TemplatedSimulations(base_task=task)\n# Create experiment\nexperiment = Experiment.from_task(\n    task,\n    name=\"SIR Python Model - Single Run\"\n)\n\n# Run experiment\nexperiment.run(\n    platform=platform,\n    wait_until_done=True\n)\n\nprint(f\"Experiment ID: {experiment.id}\")\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"tutorials/python-models/#step-3-run-your-first-simulation","title":"Step 3: Run Your First Simulation","text":"Bash<pre><code>python run_python_sir.py\n</code></pre> <p>You should see output like: Text Only<pre><code>Commissioning experiment...\nRunning simulation...\nSimulation complete: Peak infected = 1234 on day 45\nExperiment ID: abc123...\nStatus: Succeeded\n</code></pre></p>"},{"location":"tutorials/python-models/#step-4-parameter-sweeps","title":"Step 4: Parameter Sweeps","text":"<p>Now let's explore different beta values using <code>SimulationBuilder</code>:</p> Python<pre><code># run_python_sir_sweep.py\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools.entities.simulation import Simulation\nfrom idmtools_models.python.json_python_task import JSONConfiguredPythonTask\n\n# Create platform\nplatform = Platform(\"Container\", job_directory=\"DEST\")\n\ntask = JSONConfiguredPythonTask(script_path=\"sir_model.py\")\n\n# Set base parameters shared across all simulations\ntask.parameters = {\n    \"N\": 10000,\n    \"gamma\": 0.1,\n    \"days\": 160\n}\n\nbuilder = SimulationBuilder()\n\n# Sweep over beta (transmission rate)\nbeta_values = [0.3, 0.4, 0.5, 0.6, 0.7]\n\ndef set_beta(simulation: Simulation, beta):\n    simulation.task.parameters[\"beta\"] = beta\n    simulation.tags[\"beta\"] = beta\n    simulation.name = f\"SIR_beta_{beta:.2f}\"\n\nbuilder.add_sweep_definition(set_beta, beta_values)\n\n# Create experiment from builder\nexperiment = Experiment.from_builder(\n    builder,\n    task,\n    name=\"SIR Python Model - Beta Sweep\"\n)\n\nprint(f\"Created {len(experiment.simulations)} simulations\")\n\n# Run experiment\nexperiment.run(\n    platform=platform,\n    wait_until_done=True\n)\n\nprint(f\"Experiment ID: {experiment.id}\")\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"tutorials/python-models/#step-5-using-configuration-files","title":"Step 5: Using Configuration Files","text":"<p>For complex models, use JSON configuration files to sweep parameters \u2014 each simulation gets its own config file with its specific parameter values:</p> Python<pre><code># run_python_sir_with_config.py\nimport json\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools_models.python.json_python_task import JSONConfiguredPythonTask\n\n# Create platform\nplatform = Platform(\"Container\", job_directory=\"DEST\")\n\ntask = JSONConfiguredPythonTask(script_path=\"sir_model.py\")\n\n# Create builder\nbuilder = SimulationBuilder()\n\ndef create_config_file(simulation, params):\n    \"\"\"Create config file for each simulation.\"\"\"\n    config = {\n        \"N\": 10000,\n        \"beta\": params[\"beta\"],\n        \"gamma\": params[\"gamma\"],\n        \"days\": 160\n    }\n\n    # Write config to file\n    config_filename = f\"config_{simulation.id}.json\"\n    with open(config_filename, \"w\") as f:\n        json.dump(config, f, indent=2)\n\n    # Add config file as asset\n    simulation.add_asset(config_filename)\n\n    # Set command line argument to use custom config file\n    simulation.task.command.add_argument(config_filename)\n\n    # Tag simulation\n    simulation.tags.update(params)\n    simulation.name = f\"SIR_beta_{params['beta']:.2f}_gamma_{params['gamma']:.2f}\"\n\n# Define parameter combinations\nparam_combinations = [\n    {\"beta\": 0.5, \"gamma\": 0.1},\n    {\"beta\": 0.6, \"gamma\": 0.15},\n    {\"beta\": 0.7, \"gamma\": 0.2},\n]\n\nbuilder.add_sweep_definition(create_config_file, param_combinations)\n\n# Create and run experiment\nexperiment = Experiment.from_builder(\n    builder,\n    task,\n    name=\"SIR Python Model - Config Files\"\n)\n\nexperiment.run(platform=platform, wait_until_done=True)\n\nprint(f\"Experiment complete: {experiment.id}\")\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"tutorials/python-models/#step-6-analyzing-results","title":"Step 6: Analyzing Results","text":"<p>Create an analyzer to process outputs:</p> Python<pre><code># analyze_sir_results.py\nimport pandas as pd\nimport matplotlib.pyplot as plt\n\nfrom idmtools.analysis.analyze_manager import AnalyzeManager\nfrom idmtools.core import ItemType\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.entities import IAnalyzer\n\n\nclass SIRAnalyzer(IAnalyzer):\n    def __init__(self):\n        super().__init__(\n            filenames=[\"output.json\", \"sir_curve.png\"]\n        )\n\n    def map(self, data, simulation):\n        \"\"\"Extract results from each simulation.\"\"\"\n        results = data.get(\"output.json\")\n        if not results:\n            return None\n\n        return {\n            \"sim_id\": str(simulation.id),\n            \"beta\": float(simulation.tags.get(\"beta\", 0)),\n            \"gamma\": float(simulation.tags.get(\"gamma\", 0)),\n            \"peak_infected\": results[\"peak_infected\"],\n            \"peak_day\": results[\"peak_day\"],\n            \"final_recovered\": results[\"final_infected_total\"]\n        }\n\n    def reduce(self, all_data):\n        \"\"\"Aggregate and visualize results.\"\"\"\n\n        rows = []\n        for simulation, result in all_data.items():\n            rows.append(result)\n\n        df = pd.DataFrame(rows)\n        # Create summary plot\n        fig, axes = plt.subplots(1, 2, figsize=(12, 5))\n\n        # Plot 1: Peak infected vs beta\n        axes[0].scatter(df[\"beta\"], df[\"peak_infected\"])\n        axes[0].set_xlabel(\"Transmission Rate (\u03b2)\")\n        axes[0].set_ylabel(\"Peak Infected\")\n        axes[0].set_title(\"Peak Infections vs Transmission Rate\")\n        axes[0].grid(True)\n\n        # Plot 2: Peak day vs beta\n        axes[1].scatter(df[\"beta\"], df[\"peak_day\"])\n        axes[1].set_xlabel(\"Transmission Rate (\u03b2)\")\n        axes[1].set_ylabel(\"Peak Day\")\n        axes[1].set_title(\"Timing of Peak vs Transmission Rate\")\n        axes[1].grid(True)\n\n        plt.tight_layout()\n        plt.savefig(\"sir_analysis.png\", dpi=150)\n        plt.close()\n\n        print(\"\\nSummary Statistics:\")\n        print(df.describe())\n\n        return df\n\n\nif __name__ == \"__main__\":\n    # Set the platform where you want to run your analysis\n    with Platform('Container', job_directory=\"DEST\") as platform:\n        # Set the experiment you want to analyze\n        exp_id = 'f9f8e80c-4a09-f111-9318-f0921c167864'  \n\n        # Initialize the analyser class with the name of file to save to and start the analysis\n        analyzers = [SIRAnalyzer()]\n\n        # Specify the id Type, in this case an Experiment\n        manager = AnalyzeManager(ids=[(exp_id, ItemType.EXPERIMENT)], analyzers=analyzers)\n        manager.analyze()\n</code></pre>"},{"location":"tutorials/python-models/#step-7-running-on-different-platforms","title":"Step 7: Running on Different Platforms","text":"<p>All examples above use the Container platform for local execution. To run on COMPS or Slurm, swap the platform and use the appropriate task type. The <code>platform_type</code> check selects the right task and command for each environment:</p> Python<pre><code>from idmtools.assets import AssetCollection\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.entities import CommandLine\nfrom idmtools_models.python.json_python_task import JSONConfiguredPythonTask\nfrom idmtools_models.python.singularity_json_python_task import SingularityJSONConfiguredPythonTask\n\n# Swap the platform line to change where your experiment runs\nplatform = Platform(\"Container\", job_directory=\"DEST\")  # local Docker\n# platform = Platform(\"Slurm_local\", job_directory=\"DEST\")  # Slurm cluster\n# platform = Platform(\"COMPS\", environment=\"Calculon\")  # COMPS\n\nplatform_type = platform.__class__.__name__\nsif_name = \"python_minimal.sif\"\n\nif platform_type == 'COMPSPlatform':\n    command = CommandLine(\n        f\"singularity exec ./Assets/{sif_name} python3 Assets/sir_model.py\",\n    )\n    task = SingularityJSONConfiguredPythonTask(provided_command=command, script_path=\"sir_model.py\")\n    # Add Singularity image as a COMPS asset\n    task.common_assets.add_assets(AssetCollection.from_id_file(f\"../../singularity/definitions/{sif_name}.id\"))\n\nelif platform_type == 'SlurmPlatform':\n    command = CommandLine(\n        f\"singularity exec ./Assets/{sif_name} python3 Assets/sir_model.py\",\n    )\n    task = SingularityJSONConfiguredPythonTask(provided_command=command, script_path=\"sir_model.py\")\n    # Add Singularity image as a Slurm asset\n    task.common_assets.add_asset(\"python_minimal.sif\")\n\nelif platform_type == 'ContainerPlatform':\n    task = JSONConfiguredPythonTask(script_path=\"sir_model.py\")\n\n# The rest of your script (set parameters, build simulations, run) is the same\n</code></pre>"},{"location":"tutorials/python-models/#next-steps","title":"Next Steps","text":"<ul> <li>Parameter Sweeps - Advanced sweep techniques</li> <li>User Guide - Detailed documentation</li> </ul>"},{"location":"tutorials/python-models/#see-also","title":"See Also","text":"<ul> <li>[API Reference: PythonTask][idmtools_models.python.python_task.PythonTask]</li> <li>Creating Simulations</li> <li>Analyzers</li> </ul>"},{"location":"tutorials/singularity/","title":"Singularity Containers Tutorial","text":"<p>Run models inside Singularity containers for reproducible, environment-controlled simulations on HPC clusters (COMPS and Slurm).</p>"},{"location":"tutorials/singularity/#prerequisites","title":"Prerequisites","text":"<ul> <li>idmtools installed: <code>pip install idmtools[idm]</code> or <code>pip install idmtools[slurm]</code></li> <li>Singularity installed on your target cluster</li> <li>A Singularity image (<code>.sif</code> file) for your environment</li> </ul>"},{"location":"tutorials/singularity/#learning-objectives","title":"Learning Objectives","text":"<ul> <li>Understand when and why to use Singularity containers</li> <li>Run a Python model inside a Singularity container</li> <li>Run non-Python models (R, shell scripts, compiled binaries)</li> <li>Run parameter sweeps with Singularity tasks</li> </ul>"},{"location":"tutorials/singularity/#why-singularity","title":"Why Singularity?","text":"<p>Singularity containers package your entire software environment into a single <code>.sif</code> file:</p> <ul> <li>Reproducibility \u2014 exact same Python/R/library versions every run</li> <li>Portability \u2014 run the same container on any cluster</li> <li>No root required \u2014 unlike Docker, Singularity runs without admin privileges</li> <li>HPC-friendly \u2014 designed for use on shared HPC clusters like Slurm and COMPS</li> </ul>"},{"location":"tutorials/singularity/#tutorial-1-build-a-singularity-image","title":"Tutorial 1: Build a Singularity Image","text":"<p>Use <code>SingularityBuildWorkItem</code> to build a container image on the platform. This is done once \u2014 the resulting <code>.sif.id</code> file is reused in all subsequent experiments.</p>"},{"location":"tutorials/singularity/#python_minimaldef","title":"python_minimal.def","text":"Singularity<pre><code>Bootstrap: library\nFrom: ubuntu:22.04\n\n%labels\n    Author idmtools\n    Version 1.0\n    Description Minimal Python environment - fast build time\n\n%help\n    This container provides a minimal Python 3.11 environment with only essential packages.\n    Build time: ~2-3 minutes (vs 10+ minutes for full environments)\n\n    Includes:\n    - Python 3.11\n    - NumPy (numerical computing)\n    - Matplotlib (basic plotting)\n\n    Usage:\n        singularity exec python_minimal.sif python3 script.py\n\n%post\n    # Update and install Python\n    apt-get update &amp;&amp; apt-get install -y \\\n        python3.11 \\\n        python3-pip \\\n        ca-certificates\n\n    # Install minimal packages\n    pip3 install --no-cache-dir \\\n        numpy&gt;=1.24.0 \\\n        matplotlib&gt;=3.7.0\n\n    # Clean up\n    apt-get clean\n    rm -rf /var/lib/apt/lists/*\n    pip3 cache purge\n\n%environment\n    export PYTHONUNBUFFERED=1\n    export MPLBACKEND=Agg\n\n%runscript\n    exec python3 \"$@\"\n</code></pre>"},{"location":"tutorials/singularity/#step-1-build-the-image","title":"Step 1: Build the Image","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools_platform_comps.utils.singularity_build import SingularityBuildWorkItem\n\nplatform = Platform(\"Calculon\")\n\nsif_name = \"python_minimal.sif\"\n\n# Create Singularity build work item from a definition file\nsbi = SingularityBuildWorkItem(\n    name=\"Minimal Python - Singularity Build\",\n    definition_file=\"python_minimal.def\",\n    image_name=sif_name\n)\n\n# Add tags for tracking\nsbi.tags = {\"environment\": \"python_minimal\"}\n\n# Submit the build and wait for it to complete\nac = sbi.run(wait_until_done=True, platform=platform)\n\nif sbi.succeeded:\n    # Save asset collection ID to a file for reuse in experiments\n    ac.to_id_file(\"python_minimal.sif.id\")\n    print(f\"Build succeeded!\")\n    print(f\"Asset Collection ID saved to: python_minimal.sif.id\")\n    print(f\"Asset Collection ID: {ac.uid}\")\nelse:\n    print(\"Build failed\")\n</code></pre>"},{"location":"tutorials/singularity/#step-2-use-the-image-in-an-experiment","title":"Step 2: Use the Image in an Experiment","text":"<p>Once built, reference the <code>.sif.id</code> file in your task:</p> Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools.entities import CommandLine\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.assets import AssetCollection\nfrom idmtools_models.python.singularity_json_python_task import SingularityJSONConfiguredPythonTask\n\nplatform = Platform(\"Calculon\")\n\nsif_name = \"python_minimal.sif\"\n\ntask = SingularityJSONConfiguredPythonTask(\n    script_path=\"sir_model.py\",\n    provided_command=CommandLine(\n        f\"singularity exec ./Assets/{sif_name} python3 Assets/sir_model.py\"\n    )\n)\n\n# Load the previously built .sif image by its asset ID file\ntask.common_assets.add_assets(AssetCollection.from_id_file(\"python_minimal.sif.id\"))\n\n# Set parameters\ntask.parameters = {\n    \"N\": 10000,\n    \"beta\": 0.5,\n    \"gamma\": 0.1,\n    \"days\": 160\n}\n\nexperiment = Experiment.from_task(task, name=\"Singularity Python Example\")\nexperiment.run(platform=platform, wait_until_done=True)\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"tutorials/singularity/#tutorial-2-generic-singularity-task-r-shell-binaries","title":"Tutorial 2: Generic Singularity Task (R, Shell, Binaries)","text":"<p>Use <code>SingularityJSONConfiguredTask</code> for any language or executable:</p>"},{"location":"tutorials/singularity/#r-script-example","title":"R Script Example","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools.entities import CommandLine\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.assets import Asset, AssetCollection\nfrom idmtools_models.singularity_json_task import SingularityJSONConfiguredTask\n\nplatform = Platform(\"COMPS\")\n\ntask = SingularityJSONConfiguredTask(config_file_name=\"config.json\")\n\ntask.provided_command = CommandLine(\n    \"singularity exec ./Assets/r_env.sif Rscript Assets/analysis.R --config config.json\"\n)\n\n# Add R script as an asset\ntask.common_assets.add_asset(Asset(\n    filename=\"analysis.R\",\n    content=\"\"\"\nlibrary(jsonlite)\nconfig &lt;- fromJSON(\"config.json\")\ncat(\"alpha =\", config$alpha, \"\\\\n\")\ncat(\"beta  =\", config$beta, \"\\\\n\")\n# your analysis here\n\"\"\"\n))\n\ntask.common_assets.add_assets(AssetCollection.from_id_file(\"r_env.sif.id\"))\n\ntask.parameters = {\n    \"alpha\": 0.05,\n    \"beta\": 0.95,\n    \"iterations\": 1000\n}\n\nexperiment = Experiment.from_task(task, name=\"R in Singularity\")\nexperiment.run(platform=platform, wait_until_done=True)\n</code></pre>"},{"location":"tutorials/singularity/#shell-script-example","title":"Shell Script Example","text":"Python<pre><code>task = SingularityJSONConfiguredTask(config_file_name=\"params.json\")\n\ntask.provided_command = CommandLine(\n    \"singularity exec ./Assets/analysis_env.sif bash Assets/process_data.sh\"\n)\n\ntask.common_assets.add_asset(Asset(\n    filename=\"process_data.sh\",\n    content=\"\"\"#!/bin/bash\nTHRESHOLD=$(jq -r '.threshold' params.json)\necho \"Processing with threshold: $THRESHOLD\"\n# your data processing logic here\n\"\"\"\n))\n\ntask.parameters = {\n    \"threshold\": 0.75,\n    \"output_dir\": \"results\",\n    \"num_workers\": 4\n}\n</code></pre>"},{"location":"tutorials/singularity/#tutorial-3-parameter-sweep-with-singularity","title":"Tutorial 3: Parameter Sweep with Singularity","text":"<p>Combine Singularity tasks with <code>SimulationBuilder</code> for full parameter sweeps:</p> Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools.entities import CommandLine\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.entities.simulation import Simulation\nfrom idmtools.assets import AssetCollection\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools_models.singularity_json_task import SingularityJSONConfiguredTask\n\nplatform = Platform(\"COMPS\")\n\n# Base task\nbase_task = SingularityJSONConfiguredTask()\nbase_task.provided_command = CommandLine(\n    \"singularity exec ./Assets/python_env.sif python3 ./Assets/model.py\"\n)\nbase_task.common_assets.add_assets(AssetCollection.from_id_file(\"python_env.sif.id\"))\nbase_task.common_assets.add_asset(\"model.py\")\n\nbase_task.parameters = {\n    \"alpha\": 0.1,\n    \"beta\": 0.2\n}\n\n# Build parameter sweep\nbuilder = SimulationBuilder()\n\ndef set_alpha(simulation: Simulation, value):\n    return simulation.task.set_parameter(\"alpha\", value)\n\nbuilder.add_sweep_definition(set_alpha, [0.1, 0.2, 0.3, 0.4, 0.5])\n\n# Create and run experiment\nexperiment = Experiment.from_builder(\n    builder,\n    base_task,\n    name=\"Singularity Parameter Sweep\"\n)\n\nexperiment.run(platform=platform, wait_until_done=True)\nprint(f\"Ran {len(experiment.simulations)} simulations\")\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"tutorials/singularity/#using-the-id-file-pattern","title":"Using the <code>.id</code> File Pattern","text":"<p>When working with COMPS or Slurm, upload your <code>.sif</code> once and reuse the asset ID:</p> Python<pre><code>from idmtools.assets import AssetCollection\n\n# Load previously uploaded .sif by its asset ID file\nac = AssetCollection.from_id_file(\"path/to/python_env.sif.id\")\ntask.common_assets.add_assets(ac)\n</code></pre> <p>This avoids re-uploading large container images on every run.</p>"},{"location":"tutorials/singularity/#project-structure","title":"Project Structure","text":"<p>A typical Singularity-based project:</p> Text Only<pre><code>my_project/\n\u251c\u2500\u2500 model.py                  # Your model script\n\u251c\u2500\u2500 run_experiment.py         # Experiment submission\n\u251c\u2500\u2500 python_env.def            # Singularity definition file\n\u251c\u2500\u2500 python_env.sif            # Built container image (local)\n\u251c\u2500\u2500 python_env.sif.id         # COMPS asset ID (after upload)\n\u2514\u2500\u2500 idmtools.ini              # Platform configuration\n</code></pre>"},{"location":"tutorials/singularity/#next-steps","title":"Next Steps","text":"<ul> <li>Parameter Sweeps Guide - Advanced sweep patterns</li> <li>Asset Management - Managing <code>.sif</code> files and other assets</li> <li>COMPS Platform - COMPS-specific Singularity options</li> <li>Slurm Platform - Running Singularity on Slurm clusters</li> </ul>"},{"location":"user-guide/","title":"User Guide","text":"<p>Complete guide to using idmtools for disease modeling workflows.</p>"},{"location":"user-guide/#overview","title":"Overview","text":"<p>This guide covers all aspects of using idmtools:</p> <ul> <li>Creating and running simulations</li> <li>Managing experiments</li> <li>Working with different platforms</li> <li>Analyzing results</li> <li>Best practices</li> </ul>"},{"location":"user-guide/#key-concepts","title":"Key Concepts","text":"<ul> <li>Task \u2014 Defines what to run. A task wraps your model script, its parameters, and any assets it needs.</li> <li>Simulation \u2014 A single run of a task with a specific set of parameters.</li> <li>Experiment \u2014 A collection of simulations, typically created from a parameter sweep.</li> <li>Platform \u2014 Where your experiment runs (COMPS, Slurm, Container).</li> <li>Assets \u2014 Files your simulations need (scripts, data files, config files, container images).</li> <li>Analyzer \u2014 Post-processing logic that runs after simulations complete.</li> </ul>"},{"location":"user-guide/#basic-workflow","title":"Basic Workflow","text":"<ul> <li>Write your model \u2014 Create a script that accepts parameters and produces output.</li> <li>Define a task \u2014 Wrap your model in an idmtools Task.</li> <li>Build simulations \u2014 Use a <code>SimulationBuilder</code> to sweep over parameters.</li> <li>Create an experiment \u2014 Group your simulations into an experiment.</li> <li>Run \u2014 Submit the experiment to a platform.</li> <li>Analyze \u2014 Use an Analyzer to aggregate results.</li> </ul>"},{"location":"user-guide/#topics","title":"Topics","text":""},{"location":"user-guide/#core-concepts","title":"Core Concepts","text":"<ul> <li>Creating Simulations &amp; Experiments - Build simulations and organize them into experiments</li> <li>Asset Management - Handle files and resources</li> <li>Parameter Sweeps - Run parameter variations</li> <li>Analyzing Results - Process simulation outputs</li> </ul>"},{"location":"user-guide/#quick-navigation","title":"Quick Navigation","text":"<ul> <li> <p>Simulations &amp; Experiments</p> <p>Create simulations and organize them into experiments</p> <p>Go to guide \u2192</p> </li> <li> <p>Parameter Sweeps</p> <p>Run systematic parameter variations</p> <p>Go to guide \u2192</p> </li> <li> <p>Analysis</p> <p>Process and analyze simulation results</p> <p>Go to guide \u2192</p> </li> </ul>"},{"location":"user-guide/#getting-help","title":"Getting Help","text":"<ul> <li>Check the FAQ</li> <li>See Tutorials for examples</li> <li>Browse API Reference for details</li> </ul>"},{"location":"user-guide/analyzers/","title":"Analyzing Results","text":"<p>Learn how to analyze simulation outputs using idmtools analyzers.</p>"},{"location":"user-guide/analyzers/#overview","title":"Overview","text":"<p>Analyzers extract and aggregate data from simulation outputs using a map-reduce pattern:</p> <ul> <li>Map \u2014 process each simulation's output individually </li> <li>Reduce \u2014 aggregate results across all simulations</li> </ul> <p>There are two ways to run analyzers:</p> <ul> <li>AnalyzeManager \u2014 runs analyzers locally against an experiment by ID</li> <li>PlatformAnalysis \u2014 runs analyzers as a remote work item on the platform (SSMT), useful when the analysis environment or data needs to stay on the cluster</li> </ul>"},{"location":"user-guide/analyzers/#basic-pattern-custom-ianalyzer","title":"Basic Pattern: Custom IAnalyzer","text":"Python<pre><code>from typing import Dict, Any\nfrom idmtools.analysis.analyze_manager import AnalyzeManager\nfrom idmtools.core import ItemType\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.entities import IAnalyzer\n\nclass ExampleAnalyzer(IAnalyzer):\n    def __init__(self, uid=None, working_dir=None, parse=True):\n        # filenames: list of output files to retrieve from each simulation\n        super().__init__(uid, working_dir, parse, filenames=[\"output/result.json\"])\n\n    def map(self, data, simulation):\n        # data is a dict keyed by filename; return whatever you need per simulation\n        result = data[self.filenames[0]]\n        return result\n\n    def reduce(self, all_data):\n        # all_data is a dict of {simulation: map_result}\n        for simulation, result in all_data.items():\n            print(simulation)\n            print(result)\n\nif __name__ == \"__main__\":\n    with Platform('CALCULON') as platform:\n        experiment_id = 'your-experiment-id'\n        manager = AnalyzeManager(\n            ids=[(experiment_id, ItemType.EXPERIMENT)],\n            analyzers=[ExampleAnalyzer()]\n        )\n        manager.analyze()\n</code></pre>"},{"location":"user-guide/analyzers/#filtering-simulations","title":"Filtering Simulations","text":"<p>Use <code>filter()</code> to analyze only simulations meeting certain criteria:</p> Python<pre><code>class ExampleAnalyzer2(IAnalyzer):\n    def __init__(self, uid=None, working_dir=None, parse=True):\n        super().__init__(uid, working_dir, parse, filenames=[\"config.json\"])\n\n    def filter(self, simulation) -&gt; bool:\n        # only analyze simulations where tag \"b\" &gt; 5\n        return int(simulation.tags.get(\"b\")) &gt; 5\n\n    def map(self, data: Dict[str, Any], simulation):\n        result = data[self.filenames[0]]\n        return result\n\n    def reduce(self, all_data: Dict):\n        for simulation, result in all_data.items():\n            print(simulation)\n            print(result)\n</code></pre>"},{"location":"user-guide/analyzers/#multiple-analyzers","title":"Multiple Analyzers","text":"<p>Run multiple analyzers in a single <code>AnalyzeManager</code>:</p> Python<pre><code>if __name__ == \"__main__\":\n    with Platform('CALCULON') as platform:\n        experiment_id = 'your-experiment-id'\n\n        # Pass all analyzers at construction time\n        analyzers = [ExampleAnalyzer(), ExampleAnalyzer2()]\n        manager = AnalyzeManager(ids=[(experiment_id, ItemType.EXPERIMENT)], analyzers=analyzers)\n        manager.analyze()\n\n        # Or add analyzers individually before calling analyze()\n        manager2 = AnalyzeManager(ids=[(experiment_id, ItemType.EXPERIMENT)])\n        manager2.add_analyzer(ExampleAnalyzer())\n        manager2.add_analyzer(ExampleAnalyzer2())\n        manager2.analyze()\n</code></pre>"},{"location":"user-guide/analyzers/#custom-csv-analyzer-parsefalse","title":"Custom CSV Analyzer (parse=False)","text":"<p>Use <code>parse=False</code> to handle file parsing yourself:</p> Python<pre><code>import os\nfrom io import BytesIO\nfrom typing import Dict\nimport pandas as pd\nfrom idmtools.entities import IAnalyzer\n\nclass MyCSVAnalyzer(IAnalyzer):\n    def __init__(self, filenames, parse=True, output_path=\"output\"):\n        # parse=False tells idmtools to deliver raw bytes instead of a parsed object\n        super().__init__(parse=parse, filenames=filenames)\n        self.output_path = output_path\n\n    def initialize(self):\n        # called once before map(); good place to create output directories\n        self.output_path = os.path.join(self.working_dir, self.output_path)\n        os.makedirs(self.output_path, exist_ok=True)\n\n    def map(self, data, simulation) -&gt; pd.DataFrame:\n        # data[filename] is raw bytes when parse=False; read manually\n        selected_df = pd.read_csv(BytesIO(data[self.filenames[0]]), skiprows=0, header=None)\n        return selected_df\n\n    def reduce(self, all_data: Dict):\n        # combine all simulation dataframes, indexed by simulation ID\n        results = pd.concat(\n            list(all_data.values()), axis=0,\n            keys=[str(k.id) for k in all_data.keys()],\n            names=['SimId']\n        )\n        results.index = results.index.droplevel(1)\n        results = results.rename(columns={0: \"Age\", 1: \"City\"})\n\n        # write results under a folder named by experiment ID\n        first_sim = list(all_data.keys())[0]\n        exp_id = first_sim.experiment.id\n        output_folder = os.path.join(self.output_path, exp_id)\n        os.makedirs(output_folder, exist_ok=True)\n        results.to_csv(os.path.join(output_folder, self.__class__.__name__ + '.csv'))\n\nif __name__ == '__main__':\n    with Platform('CALCULON') as platform:\n        analyzers = [MyCSVAnalyzer(filenames=['output/b.csv'], parse=False)]\n        manager = AnalyzeManager(\n            partial_analyze_ok=True,  # continue even if some simulations failed\n            ids=[('your-experiment-id', ItemType.EXPERIMENT)],\n            analyzers=analyzers\n        )\n        manager.analyze()\n</code></pre>"},{"location":"user-guide/analyzers/#platformanalysis-ssmt","title":"PlatformAnalysis (SSMT)","text":"<p>Run analysis as a remote work item on COMPS:</p> Python<pre><code>from idmtools.analysis.download_analyzer import DownloadAnalyzer\nfrom idmtools.core.platform_factory import Platform\nfrom idmtools.analysis.platform_anaylsis import PlatformAnalysis\n\nplatform = Platform('CALCULON')\nanalysis = PlatformAnalysis(\n    platform=platform,\n    experiment_ids=[\"your-experiment-id\"],\n    analyzers=[DownloadAnalyzer],\n    analyzers_args=[{'filenames': [\"stderr.txt\"], 'output_path': 'output'}],\n    analysis_name=\"My Analysis\",\n    extra_args=dict(partial_analyze_ok=True) \n)\n\nanalysis.analyze(check_status=True)\nwi = analysis.get_work_item()  \nprint(wi)\n</code></pre>"},{"location":"user-guide/analyzers/#next-steps","title":"Next Steps","text":"<ul> <li>Parameter Sweeps - Run sweeps to analyze</li> <li>Platforms - Platform-specific analysis details</li> </ul>"},{"location":"user-guide/assets/","title":"Asset Management","text":"<p>Assets are files your simulations need to run \u2014 scripts, data files, config files, container images, etc. They are managed through <code>AssetCollection</code> and attached to tasks or experiments.</p>"},{"location":"user-guide/assets/#adding-assets-to-a-task","title":"Adding Assets to a Task","text":"<p>Use <code>task.common_assets</code> to add files shared across all simulations that use this task:</p> Python<pre><code>from idmtools.assets import AssetCollection\n\n# Add a single file\ntask.common_assets.add_asset(\"model.py\")\n\n# Add from an existing AssetCollection by its platform ID\ntask.common_assets.add_assets(AssetCollection.from_id(\"c94763e4-8f55-ed11-a9ff-b88303911bc1\"))\n</code></pre>"},{"location":"user-guide/assets/#adding-assets-to-an-experiment","title":"Adding Assets to an Experiment","text":"<p>Assets added at the experiment level are shared across all simulations \u2014 useful for large files you don't want to duplicate per simulation:</p> Python<pre><code>import os\nfrom idmtools.assets import AssetCollection\n\n# Add a single file directly to the experiment\nexperiment.add_asset(os.path.join(\"inputs\", \"test_interventions.py\"))\n\n# Load a shared asset collection (as_copy=True makes it mutable)\ncommon_assets = AssetCollection.from_id('707985f2-0e09-f111-9318-f0921c167864', as_copy=True)\nexperiment.add_assets(common_assets)\n</code></pre>"},{"location":"user-guide/assets/#common_assets-vs-transient_assets","title":"common_assets vs transient_assets","text":"<code>common_assets</code> <code>transient_assets</code> Scope Shared across all simulations Per-simulation only Use for Model scripts, container images, shared data Per-sim config files Uploaded Once per experiment Once per simulation Python<pre><code># Shared across all simulations (e.g. model script, .sif image)\ntask.common_assets.add_asset(\"model.py\")\n\n# Per-simulation files (e.g. individual config)\ntask.transient_assets.add_asset(\"config.json\")\n</code></pre>"},{"location":"user-guide/assets/#assetcollection-from-id-file","title":"AssetCollection from ID File","text":"<p>When working with Singularity images on COMPS/Slurm, use an <code>.id</code> file to reference a previously uploaded asset:</p> Python<pre><code>from idmtools.assets import AssetCollection\n\n# Load .sif image from its asset ID file\ntask.common_assets.add_assets(AssetCollection.from_id_file(\"python_minimal.sif.id\"))\n</code></pre>"},{"location":"user-guide/assets/#next-steps","title":"Next Steps","text":"<ul> <li>Creating Simulations &amp; Experiments - Use assets in simulations</li> <li>Parameter Sweeps - Assets in parameter sweeps</li> <li>Singularity Tutorial - Managing container image assets</li> </ul>"},{"location":"user-guide/creating-simulations/","title":"Creating Simulations &amp; Experiments","text":"<p>Learn how to create simulations and organize them into experiments in idmtools.</p>"},{"location":"user-guide/creating-simulations/#key-concepts","title":"Key Concepts","text":"<ul> <li>Task \u2014 wraps your model script and its parameters</li> <li>Simulation \u2014 a single run of a task with specific parameters</li> <li>Experiment \u2014 a collection of simulations submitted together to a platform</li> </ul>"},{"location":"user-guide/creating-simulations/#basic-example","title":"Basic Example","text":"Python<pre><code>from idmtools.core.platform_factory import Platform\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.entities.simulation import Simulation\nfrom idmtools_models.python.json_python_task import JSONConfiguredPythonTask\n\n# Create platform\nplatform = Platform('Container')\n\n# Create a python task that runs a model\ntask = JSONConfiguredPythonTask(script_path=\"model.py\")\n\n# Create a simulation from the task\nsim = Simulation.from_task(task)\n\n# Add tags for the simulation\nsim.tags = {\"my_model\": \"1.0\"}\n\n# Add to experiment (required for commission)\nexperiment = Experiment.from_task(\n    task,\n    name=\"My First Experiment\"\n)\n\n# Commission\nexperiment.run(wait_until_done=True, platform=platform)\n\n# Check status\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"user-guide/creating-simulations/#task-types","title":"Task Types","text":""},{"location":"user-guide/creating-simulations/#jsonconfiguredpythontask","title":"JSONConfiguredPythonTask","text":"<p>Runs a Python script and automatically writes parameters to a <code>config.json</code> file that your model reads:</p> Python<pre><code>from idmtools_models.python.json_python_task import JSONConfiguredPythonTask\n\ntask = JSONConfiguredPythonTask(\n    script_path=\"model.py\",\n    parameters={\"beta\": 0.5, \"gamma\": 0.1, \"N\": 10000}\n)\n</code></pre>"},{"location":"user-guide/creating-simulations/#pythontask","title":"PythonTask","text":"<p>Runs a Python script directly:</p> Python<pre><code>from idmtools_models.python.python_task import PythonTask\n\ntask = PythonTask(\n    script_path=\"model.py\",\n    python_path=\"python\"\n)\n</code></pre>"},{"location":"user-guide/creating-simulations/#commandtask","title":"CommandTask","text":"<p>Runs any command-line program:</p> Python<pre><code>from idmtools.entities.command_task import CommandTask\n\ntask = CommandTask(command=\"python model.py --config config.json\")\n</code></pre>"},{"location":"user-guide/creating-simulations/#simulation-tags","title":"Simulation Tags","text":"<p>Tags are key-value metadata used for filtering and querying results:</p> Python<pre><code>sim.tags = {\n    \"model_version\": \"1.0\",\n    \"scenario\": \"baseline\",\n    \"researcher\": \"team_a\"\n}\n</code></pre>"},{"location":"user-guide/creating-simulations/#adding-assets","title":"Adding Assets","text":"<p>Add input files your model needs:</p> Python<pre><code># Add individual files\ntask.common_assets.add_asset(\"data.csv\")\n\n# Add a directory of files\ntask.common_assets.add_directory(\"inputs/\")\n</code></pre>"},{"location":"user-guide/creating-simulations/#running-an-experiment","title":"Running an Experiment","text":"Python<pre><code>experiment.run(wait_until_done=True, platform=platform)\n\nprint(f\"Experiment ID: {experiment.id}\")\nprint(f\"Status: {experiment.status}\")\n</code></pre>"},{"location":"user-guide/creating-simulations/#multiple-simulations","title":"Multiple Simulations","text":""},{"location":"user-guide/creating-simulations/#experimentfrom_template","title":"Experiment.from_template","text":"<p>Use <code>from_template</code> with <code>TemplatedSimulations</code> and a <code>SimulationBuilder</code> to define sweeps before creating the experiment:</p> Python<pre><code>from functools import partial\nfrom idmtools.builders import SimulationBuilder\nfrom idmtools.entities import CommandLine\nfrom idmtools.entities.command_task import CommandTask\nfrom idmtools.entities.experiment import Experiment\nfrom idmtools.entities.templated_simulation import TemplatedSimulations\n\ndef set_value(simulation, name, value):\n    fix_value = round(value, 2) if isinstance(value, float) else value\n    simulation.task.command.add_raw_argument(fix_value)\n    simulation.tags[name] = fix_value\n\ncommand = CommandLine(\"python3 Assets/model.py\")\ntask = CommandTask(command=command)\nts = TemplatedSimulations(base_task=task)\n\nsb = SimulationBuilder()\nsb.add_sweep_definition(partial(set_value, name=\"pop_size\"), [10000, 20000])\nsb.add_sweep_definition(partial(set_value, name=\"n_days\"), [100, 110])\nts.add_builder(sb)\n\nexperiment = Experiment.from_template(ts, name=\"Command Task Sweep\")\nexperiment.run(wait_until_done=True, platform=platform)\n</code></pre>"},{"location":"user-guide/creating-simulations/#experimentfrom_builder","title":"Experiment.from_builder","text":"<p>Use <code>from_builder</code> with <code>SimulationBuilder</code> for systematic parameter sweeps:</p> Python<pre><code>from idmtools.builders import SimulationBuilder\nfrom idmtools.entities.experiment import Experiment\n\nbuilder = SimulationBuilder()\nbuilder.add_sweep_definition(\n    JSONConfiguredPythonTask.set_param_partial(\"beta\"),\n    [0.1, 0.2, 0.3, 0.4, 0.5]\n)\n\nexperiment = Experiment.from_builder(builder, task, name=\"Beta Sweep\")\nexperiment.run(wait_until_done=True, platform=platform)\n</code></pre> <p>See Parameter Sweeps for more sweep patterns.</p>"},{"location":"user-guide/creating-simulations/#next-steps","title":"Next Steps","text":"<ul> <li>Parameter Sweeps - Run systematic parameter variations</li> <li>Asset Management - Manage input files and resources</li> <li>Analyzing Results - Process simulation outputs</li> <li>Platform Guides - Platform-specific details</li> </ul>"}]}